// ==UserScript==
// @name			Dollchan Extension Tools
// @version			12.10.15.0
// @namespace		http://www.freedollchan.org/scripts/*
// @author			Sthephan Shinkufag @ FreeDollChan
// @copyright		(C)2084, Bender Bending Rodriguez
// @description		Doing some profit for imageboards
// @icon			https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/stable/Icon.png
// @updateURL		https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/stable/Dollchan_Extension_Tools.meta.js
// @include			*
// ==/UserScript==
var ya=void 0,i=!0,m=null,n=!1;
(function(Fa){var Ra,Sa,Ta,jb,ka,za,kb,pa,lb,Pb,qa,Qb,fa,Jc,Kc,Lc,mb,Mc,Nc,Oc,Pc,Rb,Qc,Rc,Sc,Tc,Uc,Sb,Vc,Tb,Wc,Xc,Yc,Ga,Zc,nb,ob,$c,ad,bd,pb,cd,Ub,Vb,dd,ed,fd,Wb,Xb,gd,hd,id,Yb,jd,ra,kd,ld,md,nd,od,pd,qd,rd,sd,td,Zb,qb,ud,vd,sa,wd,xd,yd,zd,$b,Ad,Bd,Cd,Dd,Ed,Fd,Gd,Hd,Id,Jd,Kd,Ld,Md,Nd,la,Od,ac,Pd,Qd,Rd,Sd,Td,Aa,Ua;function aa(a,b){return l.evaluate(a,b,m,8,m).singleNodeValue}function Ud(a,b){return b.querySelector(a)}function U(a,b){return g.d?b.getElementsByClassName(a):b.querySelectorAll("."+a)}
function z(a,b){return b.getElementsByClassName(a)[0]}function p(a){return l.getElementById(a)}function Q(a,b){return b.getElementsByTagName(a)[0]}function D(a,b){ta.forEach.call(a,b)}function Vd(a,b){var c=a.cloneNode(n);c.innerHTML=b;a.parentNode.replaceChild(c,a);return c}function R(a,b){for(var c in b)"text"===c?a.textContent=b[c]:"value"===c?a.value=b[c]:a.setAttribute(c,b[c]);return a}function S(a,b){for(var c in b)a.addEventListener(c,b[c],n);return a}function bc(a,b){for(var c in b)a.removeEventListener(c,
b[c],n)}function ga(a,b){for(var c=0,e=b.length;c<e;c++)b[c]&&a.appendChild(b[c])}function Y(a,b){a.parentNode.insertBefore(b,a)}function M(a,b){a.parentNode.insertBefore(b,a.nextSibling)}function C(a){cc.innerHTML=a;return cc.firstChild}function s(a,b,c){a=l.createElement(a);b&&R(a,b);c&&S(a,c);return a}function r(a,b,c){a=s(a,b,m);ga(a,c);return a}function W(a){return l.createTextNode(a)}function T(a,b,c){return s("input",{type:"button",value:a,title:b},{click:c})}function rb(a){return l.head.appendChild(s("script",
{type:"text/javascript",text:a},m))}function dc(a){return l.head.appendChild(s("style",{type:"text/css",text:a},m))}function G(a,b){return a?b:m}function H(a){a.style.display="none"===a.style.display?"":"none"}function w(a){a&&a.parentNode.removeChild(a)}function ma(a){a=a.getBoundingClientRect();return{top:Math.round(a.top+window.pageYOffset),left:Math.round(a.left+window.pageXOffset)}}function ec(a){window.scrollTo(0,ma(a).top)}function x(a){a.preventDefault()}function Va(a,b){var c=a.scrollTop,
e=a.selectionStart;a.value=a.value.substr(0,e)+b+a.value.substr(a.selectionEnd);a.setSelectionRange(e+b.length,e+b.length);a.focus();a.scrollTop=c}function fc(){return(g.e?l.getSelection():window.getSelection()).toString()}function Ba(a){for(var b in a)if(a.hasOwnProperty(b))return n;return i}function N(a){var b=Date.now();sb+=a+": "+(b-gc)+"ms\n";gc=b}function hf(){d.Ab&&(window.setTimeout=function(a,b){"function"===typeof a&&a.apply(m,ta.slice.call(arguments,2));return 1});String.prototype.contains||
(String.prototype.contains=function(a){return this.indexOf(a)!==-1},String.prototype.Fc=function(){return this.indexOf("#op ")===0});window.GM_log||(window.GM_log=function(a){console.error(a)});window.GM_xmlhttpRequest||(window.GM_xmlhttpRequest=function(a){var b,c=new window.XMLHttpRequest;if(a.onreadystatechange)c.onreadystatechange=function(){a.onreadystatechange(c)};c.onload=function(){if(a.onload)a.onload(c);c=a=m};c.open(a.method,a.url,i);c.setRequestHeader("Accept-Encoding","deflate, gzip, x-gzip");
for(b in a.headers)c.setRequestHeader(b,a.headers[b]);c.send(m)})}function Wa(a){return(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function ba(a){return aa("ancestor::*[@de-post]",a)}function Ha(a){return a.querySelectorAll('.thumb, img[src*="thumb"], img[src*="/spoiler"], img[src^="blob:"]')}function Wd(a){return(a=a.querySelector(d.xc))&&(a=a.textContent)?+(a.match(/\d+/)||[0])[0]:0}function na(a){return a.Qb||(a.Qb=a.i.innerHTML.replace(/<\/?(?:br|p|li)[^>]*?>/gi,"\n").replace(/<[^>]+?>/g,
"").replace(/&gt;/g,">").replace(/&lt;/g,"<").trim())}function Xd(a){var a=z(d.Z,a).textContent.match(/(\d+(?:\.\d+)?)\s*([mkк])?[bб]/i),b=parseFloat(a[1]);return"M"===a[2]?1E3*b|0:!a[2]?Math.round(b/1E3):b}function hc(a){a=z(d.Z,a);return d.F?(a=a.onclick.toString().split("', '"),[a[3],a[4]]):(a=a?a.textContent.match(/(\d+)[x\u00d7](\d+)/):n)?a.slice(1):[m,m]}function tb(a){return"/"+a+(a?"/":"")}function Xa(a,b){var c,e,k=a instanceof Array;if(k){if(0==a.length)return"[]";c="["}else{if(Ba(a))return"{}";
c="{"}e=0;g.forEach(a,function(a){var d=this[a],t=typeof d;"function"!==t&&("object"===t&&(t=d===m?"null":d instanceof Array?"array":d instanceof Date?"date":d instanceof RegExp?"regex":"object"),0<e&&(c+=","),c+="\n"+b+"    "+(k?"":'"'+a+'": ')+("array"===t||"object"===t?Xa(d,b+"    "):"boolean"===t||"number"===t?d.toString():"string"===t?'"'+d.replace(/(["\n\\])/g,"\\$1")+'"':t),e++)});return c+="\n"+b+(k?"]":"}")}function Ya(a){for(var b,c=0,e=0,k=a.length;e<k;++e){c=(c<<4)+a.charCodeAt(e);if(b=
c&4026531840)c^=b>>>24;c&=~b}return c}function Ca(a){return g.Aa?GM_getValue(a):Fa?Fa.getItem(a):localStorage.getItem(a)}function J(a,b){g.Aa?GM_setValue(a,b):Fa?Fa.setItem(a,b):localStorage.setItem(a,b)}function ub(a,b){try{return JSON.parse(Ca(a))||b}catch(c){return b}}function vb(a){for(var b in a)this[b]=a[b]}function ic(a){try{var b=JSON.parse(Ca(a));if(b.version)return new vb(b)}catch(c){}return n}function Yd(a){a=a&&ic("DESU_GlobalCfg")||new vb({version:Ia.version});a.captchaLang=d.Ec?2:1;
a.language=navigator.language.contains("ru")?0:1;a.timePattern=a.timeOffset="";a.correctTime=0;return a}function O(a,b){f[a]!==b&&(f[a]=b,J("DESU_Config_"+d.c,JSON.stringify(f)))}function wb(a){O(a,!f[a]?1:0)}function Zd(){X=[];if(q){var a=(sessionStorage["de-hidden-"+u+q]||"").split(",");if(2===a.length&&+a[0]===(f.hideBySpell?E.hash:0))if(X=a[1].split(""),a=sessionStorage["de-deleted"])a.split(",").forEach(function(a){X.splice(a,1)}),delete sessionStorage["de-deleted"]}X.length=B.length;P=ub("DESU_Posts_"+
d.c+"_"+u,{});$d()}function Ja(){q&&(sessionStorage["de-hidden-"+u+q]=(f.hideBySpell?E.hash+",":"0,")+X.join(""));oa("hid",i)}function Ka(){var a,b=JSON.stringify(P);9E3<b.length&&(a=Date.now()-432E6,g.forEach(P,function(b){P[b][1]<a&&delete P[b]}),b=JSON.stringify(P));J("DESU_Posts_"+d.c+"_"+u,b);oa("hid",i)}function $d(){V=ub("DESU_Threads_"+d.c,{});Da=V[u]||{}}function ae(a,b){V[u]||(V[u]=Da);0===b?Da[a.a]=a.ra:(delete Da[a.a],Ba(Da)&&delete V[u]);J("DESU_Threads_"+d.c,JSON.stringify(V))}function jc(){F=
ub("DESU_Favorites",{})}function Za(a){J("DESU_Favorites",a);oa("fav",i)}function kc(a,b,c){delete F[a][b][c];Ba(F[a][b])&&delete F[a][b];Ba(F[a])&&delete F[a];I[c]&&((z("de-btn-fav-sel",I[c].G)||{}).className="de-btn-fav")}function be(a,b){var c=d.host,e=u,k=a.a;b&&(jc(),F[c]&&F[c][e]&&F[c][e][k]?kc(c,e,k):(F[c]||(F[c]={}),F[c][e]||(F[c][e]={}),F[c][e][k]={cnt:a.N.S+1,txt:a.ra,url:d.J(u,k)},b.className="de-btn-fav-sel"),Za(JSON.stringify(F)))}function ce(){var a=sessionStorage["de-viewed"];a&&a.split(",").forEach(function(a){if(a=
I[a])g.s(a,"de-viewed"),a.fb=i})}function Z(a,b,c,e,k){return r("li",m,[s("a",{id:"de-btn-"+a,"class":"de-abtn",title:Qb[a][h],href:c||"#",onmouseout:k},{click:b,mouseover:e})])}function de(){var a=Ha(y).length;Y(y,r("div",{id:"de-main",lang:ee()},[r("div",{id:"de-panel"},[s("span",{id:"de-btn-logo"},{click:function(){wb("expandPanel");ha()}}),r("ul",{id:"de-panel-btns"},[Z("settings",function(a){x(a);oa("cfg",n)},m,m,m),Z("hidden",function(a){x(a);oa("hid",n)},m,m,m),Z("favor",function(a){x(a);oa("fav",
n)},m,m,m),Z("refresh",function(a){x(a);window.location.reload()},m,function(){q||jf()},"de_delSelection(event)"),Z("goback",m,d.$(u,$a-1),m,m),G(!q,Z("gonext",m,d.$(u,$a+1),m,m)),Z("goup",function(a){x(a);window.scrollTo(0,0)},m,m,m),Z("godown",function(a){x(a);window.scrollTo(0,l.body.scrollHeight||l.body.offsetHeight)},m,m,m),G(!q&&(j.form||$),Z("newthr",fe,m,m,m)),G(0<a,Z("expimg",function(a){x(a);f.expandImgs=1;ab=!ab;B.forEach(function(a){lc(a,ab)})},m,m,m)),G(j.file||$,Z("maskimg",function(a){x(a);
wb("maskImgs");ha()},m,m,m)),G(q&&1===f.updThread,Z("upd-on",function(a){x(a);xb?ge():(this.id="de-btn-upd-on",he())},m,m,m)),G(!g.ta&&q&&1===f.updThread,Z("audio-off",function(a){x(a);ie();Ra=n;this.id=Sa?"de-btn-audio-on":"de-btn-audio-off";w(p("de-select"))},m,kf,"de_delSelection(event)")),G(d.R,Z("catalog",m,"//"+d.host+"/"+u+"/catalog.html",m,m))]),G(q,r("div",{id:"de-panel-info"},[s("span",{title:Qb.counter[h],text:B.length+"/"+a},m)]))]),s("div",{"class":"de-content"},m),s("div",{id:"de-alert"},
m),s("hr",{style:"clear: both;"},m)]))}function oa(a,b){if(!bb){var c=z("de-content",l),e="de-content-"+a;b&&c.id!==e||(c.childElementCount&&f.animation?(g.Y(c,function(c){je(c,e,a,b);e=a=b=m}),c.className="de-content de-cfg-close"):je(c,e,a,b))}}function je(a,b,c,e){a.innerHTML=a.style.backgroundColor="";if(!e&&a.id===b)a.removeAttribute("id");else{a.id=b;if("cfg"===c)lf(a);else if(f.attachPanel&&(a.style.backgroundColor=getComputedStyle(l.body).getPropertyValue("background-color")),"hid"===c&&($d(),
mf(a)),"fav"===c)jc(),nf(a);f.animation&&(a.className="de-content de-cfg-open")}}function ua(a,b){for(var c=b.length;c--;)(l.querySelector(b[c])||{}).disabled=!a}function mc(){ua(1===f.updThread,['input[info="updThrDelay"]','input[info="favIcoBlink"]','input[info="desktNotif"]']);ua(f.preLoadImgs,['input[info="findRarJPEG"]','input[info="showGIFs"]','input[info="noImgSpoil"]']);ua(f.linksNavig,['input[info="linksOver"]','input[info="linksOut"]','input[info="markViewed"]','input[info="strikeHidd"]',
'input[info="noNavigHidd"]']);ua(f.addYouTube&&4!==f.addYouTube,['select[info="YTubeType"]','input[info="YTubeHD"]']);ua(f.addYouTube,['input[info="YTubeWidth"]','input[info="YTubeHeigh"]','input[info="YTubeTitles"]']);ua(2===f.ajaxReply,['input[info="postSameImg"]','input[info="removeEXIF"]','input[info="removeFName"]']);ua(f.addTextBtns,['input[info="txtBtnsLoc"]']);ua(f.updScript,['select[info="scrUpdIntrv"]'])}function A(a,b,c){var e=s("input",{info:a,type:"checkbox"},{click:function(){wb(this.getAttribute("info"));
mc();c&&c(this)}});e.checked=f[a];return r("label",b?{"class":"de-block"}:m,[e,W(" "+fa[a][h])])}function ia(a,b,c){return s("input",{info:a,type:"text",size:b,value:f[a]},{keyup:c?c:function(){O(this.getAttribute("info"),this.value)}})}function ca(a,b,c){for(var e=0,k=fa[a],d=k.q[h].length,o="";e<d;e++)o+='<option value="'+e+'">'+k.q[h][e]+"</option>";(c=S(C('<select info="'+a+'">'+o+"</select>"),{change:c?c:function(){O(this.getAttribute("info"),this.selectedIndex);mc()}})).selectedIndex=f[a];return r("label",
b?{"class":"de-block"}:m,[c,W(" "+k.t[h])])}function La(a){return r("div",{"class":d.u+" de-cfg-tab-back",selected:n},[s("div",{"class":"de-cfg-tab",text:Jc[a][h],info:a},{click:function(){var a,c;c=this.parentNode;if("true"!==c.getAttribute("selected")){if(a=z("de-cfg-body",l))a.className="de-cfg-unvis",l.querySelector('.de-cfg-tab-back[selected="true"]').setAttribute("selected",n);c.setAttribute("selected",i);c=this.getAttribute("info");(a=p("de-cfg-"+c))||M(p("de-cfg-bar"),a="posts"===c?of():"links"===
c?pf():"form"===c?qf():"common"===c?rf():sf());a.className="de-cfg-body";"filters"===c&&(E.update(),p("de-spell-edit").value=E.list);mc()}}})])}function nc(){var a=this.scrollTop,b=p("de-spell-rowmeter"),c=b.qc||1,e="",k=19;if(c-k<a/12|1){for(;k--;)e+=c++ +"<br>";b.insertAdjacentHTML("beforeend",e);b.qc=c}b.scrollTop=a}function tf(){return r("div",{"class":"de-cfg-unvis",id:"de-cfg-filters"},[r("div",m,[r("span",{id:"de-spell-panel"},[s("a",{text:Kc[h],href:"#","class":"de-abtn",onmouseout:"de_delSelection(event)"},
{click:x,mouseover:uf}),s("a",{text:Lc[h],href:"#","class":"de-abtn"},{click:function(a){x(a);O("hideBySpell",1);l.querySelector('input[info="hideBySpell"]').checked=i;oc()}}),s("a",{text:mb[h],href:"#","class":"de-abtn"},{click:function(a){x(a);p("de-spell-edit").value="";oc()}}),s("a",{text:Mc[h],target:"_blank",href:"https://github.com/SthephanShinkufag/Dollchan-Extension-Tools/wiki/Spells-"+(h?"en":"ru"),"class":"de-abtn"},m)]),A("hideBySpell",n,oc),r("div",{id:"de-spell-div"},[C('<div><div id="de-spell-rowmeter"></div></div>'),
r("div",m,[s("textarea",{id:"de-spell-edit",wrap:"off"},{keydown:nc,scroll:nc})])])]),A("menuHiddBtn",i,m),A("hideRefPsts",i,m),A("delHiddPost",i,function(){D(U("de-post-hid",y),function(a){H(d.ya(a))});ha()})])}function of(){return r("div",{"class":"de-cfg-unvis",id:"de-cfg-posts"},[ca("updThread",n,m),r("label",m,[ia("updThrDelay",4,m),W(fa.updThrDelay[h])]),r("div",{"class":"de-cfg-depend"},[G(!g.m,A("favIcoBlink",i,m)),G(g.m,A("desktNotif",i,function(){f.desktNotif&&window.webkitNotifications.requestPermission()}))]),
ca("expandPosts",i,m),ca("expandImgs",i,m),G(!g.ba,A("preLoadImgs",i,m)),G(!g.ba,r("div",{"class":"de-cfg-depend"},[G(!d.D&&!d.b,A("findRarJPEG",i,m)),A("showGIFs",i,m),A("noImgSpoil",i,m)])),A("postBtnsTxt",i,m),A("imgSrcBtns",i,m),A("noSpoilers",i,ha),A("noPostNames",i,ha),A("noPostScrl",i,ha),r("div",m,[A("keybNavig",n,m),s("a",{text:"?",href:"#","class":"de-abtn"},{click:function(a){x(a);K(Nc[h],"help-keybnavig",n)}})]),A("correctTime",i,va.Gc),r("div",{"class":"de-cfg-depend"},[r("div",m,[ia("timeOffset",
3,m),W(fa.timeOffset[h])]),r("div",m,[ia("timePattern",30,m),W(" "),s("a",{text:fa.timePattern[h],href:"#","class":"de-abtn"},{click:function(a){x(a);K('"s" - second (one digit),\n"i" - minute (one digit),\n"h" - hour (one digit),\n"d" - day (one digit),\n"w" - week (string)\n"n" - month (one digit),\n"m" - month (string),\n"y" - year (one digit),\n"-" - any symbol\n"+" - any symbol except digits\n"?" - previous char may not be\n\nExamples:\n0chan.ru: "w+yyyy+m+dd+hh+ii+ss"\niichan.ru, 2ch.so: "w+dd+m+yyyy+hh+ii+ss"\ndobrochan.ru: "dd+m+?+?+?+?+?+yyyy++w++hh+ii-?s?s?"\n410chan.org: "dd+nn+yyyy++w++hh+ii+ss"\n4chan.org: "nn+dd+yy+w+hh+ii-?s?s?"\n4chon.net: "nn+dd+yy++w++hh+ii+ss"\nkrautchan.net: "yyyy+nn+dd+hh+ii+ss+--?-?-?-?-?"',
"help-correcttime",n)}})])])])}function pf(){return r("div",{"class":"de-cfg-unvis",id:"de-cfg-links"},[ca("linksNavig",i,m),r("div",{"class":"de-cfg-depend"},[r("div",m,[ia("linksOver",6,function(){O("linksOver",+this.value|0)}),W(fa.linksOver[h])]),r("div",m,[ia("linksOut",6,function(){O("linksOut",+this.value|0)}),W(fa.linksOut[h])]),A("markViewed",i,m),A("strikeHidd",i,m),A("noNavigHidd",i,m)]),A("crossLinks",i,m),A("insertNum",i,m),A("addMP3",i,m),A("addImgs",i,m),ca("addYouTube",i,m),r("div",
{"class":"de-cfg-depend"},[r("div",m,[ca("YTubeType",n,m),ia("YTubeWidth",6,m),W("\u00d7"),ia("YTubeHeigh",6,m),W(" "),A("YTubeHD",n,m)]),G(!(g.e&&12>g.e),A("YTubeTitles",n,m))])])}function qf(){return r("div",{"class":"de-cfg-unvis",id:"de-cfg-form"},[ca("ajaxReply",i,m),G(!g.ta&&!g.ba,r("div",{"class":"de-cfg-depend"},[A("postSameImg",i,m),A("removeEXIF",i,m),A("removeFName",i,m)])),G(j.form,ca("addPostForm",i,m)),G(j.form,A("noThrdForm",i,function(){q||(p("de-parea").style.display=f.noThrdForm?
"none":"")})),A("favOnReply",i,m),G(j.Q,r("div",m,[A("addSageBtn",n,m),A("saveSage",n,m)])),ca("captchaLang",i,m),G(j.form,r("div",m,[ca("addTextBtns",n,function(){O("addTextBtns",this.selectedIndex);pc()}),A("txtBtnsLoc",n,pc)])),G(j.V,r("div",m,[ia("passwValue",20,ke),W(fa.userPassw[h])])),G(j.name,r("div",m,[ia("nameValue",20,qc),A("userName",n,qc)])),G(j.g,r("div",m,[ia("signatValue",20,m),A("userSignat",n,m)])),r("div",m,[G(j.form||$,W(Oc[h])),A("noBoardRule",n,ha),G(j.za,A("noGoto",n,function(){H(j.za)})),
G(j.V,A("noPassword",n,function(){H(j.V.parentNode.parentNode)}))])])}function rf(){return r("div",{"class":"de-cfg-unvis",id:"de-cfg-common"},[G(g.Ba,r("div",m,[W(fa.excludeList[h]),s("textarea",{value:Ca("DESU_Exclude")||"",rows:6,cols:50},{keyup:function(){J("DESU_Exclude",this.value)}})])),ca("scriptStyle",i,function(){O("scriptStyle",this.selectedIndex);p("de-main").lang=ee()}),A("attachPanel",i,function(){oa("cfg",n);ha()}),A("panelCounter",i,ha),A("rePageTitle",i,m),G(g.Ga,A("animation",i,
m)),A("closePopups",i,m),G(!g.e,r("div",m,[A("updScript",i,m),r("div",{"class":"de-cfg-depend"},[ca("scrUpdIntrv",i,m),T(Pc[h],"",function(){var a=p("de-cfg-updresult");a.innerHTML='<span class="de-wait">'+Rb[h]+"</div>";le(i,function(b){a.innerHTML=b})})]),s("div",{id:"de-cfg-updresult"},m)]))])}function sf(){return r("div",{"class":"de-cfg-unvis",id:"de-cfg-info"},[C('<span style="width: 179px;"><b>'+Qc[h]+f.version+"</b><br><br>"+Rc[h]+(g.Aa?"Mozilla config":Fa?"Opera ScriptStorage":"Local Storage")+
"<br>"+Sc[h]+da.view+"<br>"+Tc[h]+da.op+"<br>"+Uc[h]+da.reply+"</span>"),C('<span style="padding-left: 7px; border-left: 1px solid grey;">'+sb.split("\n").join("<br>")+"<br>"+Sb[h]+rc+"ms</span>"),r("div",{style:"display: table;"},[C('<span style="display: table-cell; width: 100%;"><a href="//www.freedollchan.org/scripts/" target="_blank">http://www.freedollchan.org/scripts</a></span>'),R(T(Vc[h],Tb[h],function(){var a,b=new vb(f),c=sb.split("\n");c[c.length-1]=Sb[h]+rc+"ms";delete b.nameValue;delete b.passwValue;
delete b.signatValue;delete b.lastScrUpd;for(a in b)b[a]===Ia[a]&&delete b[a];K(Tb[h]+':<br><textarea readonly rows="20" cols="75">'+Xa({version:Ia.version,location:""+window.location,nav:g,cfg:b,spells:E.list.split("\n"),cSpells:Ca("DESU_CSpells_"+d.c),oSpells:sessionStorage["de-spells-"+u+q],perf:c},"")+"</textarea>","help-debug",n)}),{style:"display: table-cell;"})])])}function lf(a){a.appendChild(r("div",{"class":d.u},[s("div",{id:"de-cfg-head",text:"Dollchan Extension Tools"},m),r("div",{id:"de-cfg-bar"},
[La("filters"),La("posts"),La("links"),La("form"),La("common"),La("info")]),tf(),r("div",{id:"de-cfg-btns"},[r("span",{style:"float: right;"},[ca("language",n,function(){O("language",h=this.selectedIndex);w(p("de-main"));w(p("de-css"));w(p("de-css-dynamic"));me();de();oa("cfg",n)}),G(g.Ba,T(Wc[h],Xc[h],function(){ic("DESU_GlobalCfg")?(J("DESU_Config_"+d.c,""),window.location.reload()):K(Yc[h],"err-noglobalcfg",n)})),G(g.Ba,T(Ga[h],Zc[h],function(){J("DESU_GlobalCfg",JSON.stringify(f));oa("cfg",i)})),
T(nb[h],ob[h],function(){H(R(Q("textarea",this.parentNode.parentNode),{value:Xa(f,"")}).parentNode)}),T($c[h],ad[h],function(){confirm(bd[h])&&(J("DESU_Config_"+d.c,JSON.stringify(Yd(n))),J("DESU_Stat_"+d.c,""),J("DESU_Favorites",""),J("DESU_Threads_"+d.c,""),J("DESU_Spells_"+d.c,'[1,85765385,"#wipe(samelines,samewords,longwords,numbers)"]'),window.location.reload())})]),s("br",{style:"clear: both;"},m),r("div",{style:"display: none;"},[s("textarea",{rows:10,cols:50},m),T(Ga[h],pb[h],function(){J("DESU_Config_"+
d.c,this.previousSibling.value.trim().replace(/\n/g,""));window.location.reload()})])])]));z("de-cfg-tab",a).click();p("de-spell-edit").setSelectionRange(0,0);nc()}function ne(a,b){return a.appendChild(r("div",{"class":"de-content-block"},[s("input",{type:"checkbox"},{click:function(){var a=this.checked;D(this.parentNode.querySelectorAll(".de-entry > div > input"),function(b){b.checked=a});a=m}}),b]))}function mf(a){var b,c,e;D(U("de-post-hid",y),function(b){if(!b.p){var c=b.cloneNode(i);c.removeAttribute("id");
c.style.display="";c.h=i;c.uc=b;c.wa=c.querySelector(".de-btn-hide, .de-btn-hide-user");c.wa.parentNode.className="de-ppanel";c.wa.onmouseover=c.wa.onmouseout=m;c.wa.onclick=function(){var a=ba(this);cb(a,a.h=!a.h)};(e||(e=a.appendChild(r("div",{"class":"de-content-block"},[C("<b>"+cd[h]+":</b>")])))).appendChild(r("div",{"class":"de-entry"},[c]))}});e?ga(a,[T(Ub[h],"",function(){D(this.parentNode.querySelectorAll(".de-entry > [de-post]"),function(a){cb(a,a.h=!a.h)});this.value=this.value==Vb[h]?
Ub[h]:Vb[h]}),T(Ga[h],"",function(){D(this.parentNode.querySelectorAll(".de-entry > [de-post]"),function(a){a.h||Ma(a.uc,n)});Ka()})]):a.appendChild(C("<b>"+dd[h]+"</b>"));ga(a,[C("<hr />"),C("<b>"+(Ba(V)?ed[h]:fd[h]+":")+"</b>")]);if(!Ba(V))for(b in V)for(c in e=ne(a,C("<b>/"+b+"</b>")),V[b])e.appendChild(r("div",{"class":"de-entry",info:b+";"+c},[r("div",{"class":d.u},[s("input",{type:"checkbox"},m),C('<a href="'+d.J(b,c)+'" target="_blank">№'+c+"</a>"),W(" - "+V[b][c])])]));ga(a,[C("<hr />"),
T(nb[h],ob[h],function(){H(R(Q("textarea",this.parentNode),{value:Xa(V,"")}).parentNode)}),T(Wb[h],Xb[h],function(){D(this.parentNode.querySelectorAll(".de-entry[info]"),function(a){var b=a.getAttribute("info").split(";"),c=b[0],b=b[1];Q("input",a).checked&&(I[b]?Ma(I[b],n):delete V[c][b],Ba(V[c])&&delete V[c])});J("DESU_Threads_"+d.c,JSON.stringify(V));Ka()}),r("div",{style:"display: none;"},[s("textarea",{rows:9,cols:70},m),T(Ga[h],pb[h],function(){J("DESU_Threads_"+d.c,this.previousSibling.value.trim().replace(/\n/g,
""));window.location.reload()})])])}function nf(a){var b,c,e,k;for(b in F)for(c in F[b])for(e in k=ne(a,C("<b>"+b+"/"+c+"</b>")),F[b][c])F[b][c][e].url||(F[b][c][e].url=tb(c)+(/(?:^|\.)krautchan\.net$/.test(b)?"thread-":"res/")+e+(/(?:^|\.)(?:dobrochan\.(?:ru|org)|tenhou\.ru)$/.test(b)?".xhtml":/(?:^|\.)420chan\.org$/.test(b)?".php":/(?:^|\.)2chan\.net$/.test(b)?".htm":".html")),k.appendChild(r("div",{"class":"de-entry",info:b+";"+c+";"+e},[r("div",{"class":d.u},[C('<input type="checkbox" />'),s("span",
{"class":"de-btn-expthr"},{click:vf}),C('<a href="//'+b+F[b][c][e].url+'">№'+e+"</a>"),C('<span class="de-fav-title"> - '+F[b][c][e].txt+"</span>"),C('<span class="de-fav-inf-page"></span>'),C('<span class="de-fav-inf-posts">[<span class="de-fav-inf-old">'+F[b][c][e].cnt+"</span>]</span>")])]));k||a.appendChild(C("<b>"+gd[h]+"</b>"));ga(a,[l.createElement("hr"),T(nb[h],ob[h],function(){H(R(Q("textarea",this.parentNode),{value:Xa(F,"")}).parentNode)}),T(hd[h],id[h],function(){D(U("de-entry",l),
function(a){var b,c=a.getAttribute("info").split(";"),e=F[c[0]][c[1]][c[2]];c[0]===d.host&&(b=R(z("de-fav-inf-posts",a).firstElementChild,{"class":"de-wait",text:""}),xa(m,c[1],c[2],i,function(a,c,k){a=k?k:a.length+1;b.textContent=a;!k&&a>e.sb?(b.className="de-fav-inf-new",e.sb=a,J("DESU_Favorites",JSON.stringify(F))):b.className="de-fav-inf-old";b=e=m}))})}),T(Yb[h],jd[h],function(){var a=6,b=0;for(K(ra[h],"load-pages",i);a--;)oe(C("<div></div>"),a,function(a,c){D(U("de-entry",l),function(e){var k=
e.getAttribute("info").split(";");k[0]!==d.host||k[1]!==u||(e=z("de-fav-inf-page",e),RegExp("(?:№|No.|>)\\s*"+k[2]+"\\s*<").test(a.innerHTML)?e.innerHTML="@"+c:5===b&&!e.textContent.contains("@")&&(e.innerHTML="@?"))});5===b&&ja(p("de-alert-load-pages"));b++;a=c=m})}),T(mb[h],kd[h],function(){D(U("de-entry",l),function(a){var b=a.getAttribute("info").split(";");g.e&&b[0]!==d.host||xa("//"+b[0]+F[b[0]][b[1]][b[2]].url,m,m,n,function(a,c,e){e&&(kc(b[0],b[1],b[2]),Za(JSON.stringify(F)));b=m})})}),
T(Wb[h],Xb[h],function(){D(U("de-entry",l),function(a){var b=a.getAttribute("info").split(";");Q("input",a).checked&&kc(b[0],b[1],b[2])});Za(JSON.stringify(F))}),r("div",{style:"display: none;"},[s("textarea",{rows:9,cols:70},m),T(Ga[h],pb[h],function(){Za(this.previousSibling.value.trim().replace(/\n|\r/,""))})])])}function ja(a){a&&(a.rb=m,f.animation?(g.Y(a,w),g.s(a,"de-close")):w(a))}function K(a,b,c){var e=p("de-alert-"+b),k="de-alert-msg"+(c?" de-wait":""),v=c?"":"\u00d7 ";e?(R(Q("div",e),{"class":k}).innerHTML=
a.trim(),Q("span",e).textContent=v,clearTimeout(e.rb),f.animation&&(g.Y(e,function(a){g.W(a,"de-blink")}),g.s(e,"de-blink"))):(e=p("de-alert").appendChild(r("div",{"class":d.u,id:"de-alert-"+b},[s("span",{"class":"de-alert-btn",text:v},{click:function(){ja(this.parentNode)}}),C('<div class="'+k+'">'+a.trim()+"</div>")])),f.animation&&(g.Y(e,function(a){g.W(a,"de-open")}),g.s(e,"de-open")));f.closePopups&&!c&&!b.contains("help")&&(e.rb=setTimeout(ja,4E3,e))}function Na(a,b,c){var e,k=ba(a);f.attachPanel&&
b?(e="fixed",b="de-btn-refresh"===a.id||"de-btn-audio-off"===a.id?"bottom: 25":"top: "+(a.getBoundingClientRect().top+a.offsetHeight-(g.d?0.5:0))):(e="absolute",b="top: "+(ma(a).top+a.offsetHeight-(g.d?0.5:0)));l.body.appendChild(S(C('<div class="'+d.u+'" id="de-select" style="position: '+e+"; "+("de-btn-src"===a.className?"left: "+ma(a).left:"right: "+(l.body.clientWidth-ma(a).left-a.offsetWidth))+"px; "+b+'px;" onmouseout="de_delSelection(event)">'+c+"</div>"),{mouseover:function(){k&&db(k,n)}}));
return p("de-select").getElementsByTagName("a")}function uf(a){D(Na(a.target,i,'<div style="display: inline-block; border-right: 1px solid grey;"><a href="#">'+"#words,#exp,#exph,#imgn,#ihash,#subj,#name,#trip,#img".split(",").join('</a><a href="#">')+'</a></div><div style="display: inline-block;"><a href="#">'+"#sage,#op,#tlen,#all,#video,#num,#wipe,#rep,#outrep".split(",").join('</a><a href="#">')+"</a></div>"),function(a){a.onclick=function(a){var b=this.textContent;x(a);Va(p("de-spell-edit"),
b+(q&&"#op"!==b&&"#rep"!==b&&"#outrep"!==b?"["+u+","+q+"]":"")+(E.pc(b.substr(1))?"(":""))}})}function pe(a){if(f.menuHiddBtn){this.Cb=[];this.Db=[];!a.h&&(Oa=fc().trim())&&this.add("sel");a.P[0]?(this.add("img"),this.add("ihash")):this.add("noimg");this.add(na(a)?"text":"notext");var b=Na(a.G.firstChild,n,'<a href="#">'+this.Cb.join('</a><a href="#">')+"</a>");this.Db.forEach(function(a,e){this[a](b[e])},this.hc);b[0].parentNode.Za=a;b=m}}function xf(a){D(Na(a.G.querySelector("span:nth-child(3)"),
n,'<a href="#">'+ld[h].join('</a><a href="#">')+"</a>"),function(b){b.onclick=function(b){x(b);eb(a,parseInt(this.textContent,10),m)}})}function jf(){D(Na(p("de-btn-refresh"),i,'<a href="#">'+md[h].join('</a><a href="#">')+"</a>"),function(a){a.onclick=function(a){x(a);qe(ta.indexOf.call(this.parentNode.children,this)+1)}})}function kf(){"de-btn-audio-off"===this.id&&D(Na(p("de-btn-audio-off"),i,'<a href="#">'+nd[h].join('</a><a href="#">')+"</a>"),function(a){a.onclick=function(a){x(a);a=ta.indexOf.call(this.parentNode.children,
this);Ra=0===a?3E4:1===a?6E4:2===a?12E4:3E5;ie();p("de-btn-audio-off").id="de-btn-audio-on";w(this.parentNode)}})}function yf(a){var b=a.nextSibling.href+'" target="_blank">'+od[h],c=l.body.getAttribute("de-image-search"),e="";c&&(c=c.split(";"),c.forEach(function(a){a=a.split(",");e+='<a class="de-src'+a[0]+(!a[1]?'" onclick="de_cImgSearch(event, \''+a[0]+'\')" href="#" de-url="':'" href="'+a[1])+b+a[0]+"</a>"}));Na(a,n,'<a class="de-src-iqdb" href="//iqdb.org/?url='+b+'IQDB</a><a class="de-src-tineye" href="//tineye.com/search/?url='+
b+'TinEye</a><a class="de-src-google" href="//google.ru/searchbyimage?image_url='+b+'Google</a><a class="de-src-saucenao" href="//saucenao.com/search.php?url='+b+"SauceNAO</a>"+e);e=m}function zf(){function a(){try{e=c(B,0>=e?0:e-1,-1,i,n),o=i}catch(a){}}function b(){if(e!==B.length-1)try{e=c(B,e+1,1,B[e+1].p||B[e+1].getBoundingClientRect().top>window.innerHeight/2-B[e+1].clientHeight/2,n),o=i}catch(a){}}function c(a,b,c,e,k){for(var d=b;a[d].h||a[d].N.h;)d+=c;a=a[d];if(d!==b||e)window.scrollTo(0,
k?ma(a).top:ma(a).top-window.innerHeight/2+a.clientHeight/2);(b=z("de-selected",l))&&g.W(b,"de-selected");a.p&&(a=a.N);g.s(a,"de-selected");return d}var e,k=0,v=n,o=i,t=i;window.onscroll=function(){v?v=n:t=o=i};l.addEventListener("keydown",function(f){var h=f.target.tagName,j=f.keyCode;if("TEXTAREA"===h||"INPUT"===h&&"text"===f.target.type)27===j&&f.target.blur();else if(f.ctrlKey)q?37===j&&(window.location.pathname=d.$(u,0)):37===j?window.location.pathname=d.$(u,$a-1):39===j&&(window.location.pathname=
d.$(u,$a+1));else if(!f.altKey&&!(f.shiftKey||74!==j&&75!==j&&77!==j&&78!==j&&86!==j&&116!==j))if(116===j)q||(x(f),qe(1));else{x(f);f.stopPropagation();if(t){if(o)a:{for(var f=B,h=0,l=window.pageYOffset;h<f.length;h++)if(ma(f[h]).top>l){f=h-1;break a}f=ya}else f=B.indexOf(ea[k]);e=f}if(!q&&o)if((B[e]||{}).p)k=h=ea.indexOf(B[e]);else if(t){for(h=0>=e?0:e;0<h&&!B[h].p;h--);k=h=ea.indexOf(B[h])}else h=k;else h=k;o=t=n;if(86===j)q?sc(B[e]):g.d?GM_openInTab("//"+d.host+d.J(u,ea[h].a),n,i):window.open("//"+
d.host+d.J(u,ea[h].a),"_blank");else if(v=i,75===j)if(q)a();else try{k=c(ea,0>=k?0:k-1,-1,i,i),t=i}catch(p){}else if(74===j)if(q)b();else{if(k!==ea.length-1)try{k=c(ea,k+1,1,i,i),t=i}catch(r){}}else!q&&77===j?a():!q&&78===j&&b()}},i)}function re(a,b){if(d.H||d.Fa)return a.replace(/\?[^?]+$|$/,(d.fa?"?board="+u+"&":"?")+Math.random());0<b&&(a=a.replace(/mainpage|res\d+/ig,"res"+b));return a.replace(/dummy=[\d\.]*/,"dummy="+Math.random())}function fb(a){var b=j.da?p("recaptcha_image")||j.da:Q("img",
j.U(j.l));d.j||j.da?(a=l.createEvent("MouseEvents"),a.initEvent("click",i,i),b.dispatchEvent(a)):(a=re(b.getAttribute("src"),a),b.src="",b.src=a)}function se(){var a=f.sageReply;p("de-sagebtn").innerHTML="&nbsp;"+(a?'<span class="de-btn-sage"></span><b style="color: red;">SAGE</b>':"<i>(no&nbsp;sage)</i>");"text"===j.Q.type?j.Q.value=a?"sage":d.b?"noko":"":j.Q.checked=a}function qc(){var a=l.querySelector('input[info="nameValue"]');a&&O("nameValue",a.value);j.name.value=f.userName?f.nameValue:""}
function ke(){var a=l.querySelector('input[info="passwValue"]');a&&O("passwValue",a.value);(j.gc||{}).value=j.V.value=f.passwValue}function Af(){function a(){bc(l.body,{mousemove:b,mouseup:a});O("textaWidth",parseInt(j.g.style.width,10));O("textaHeight",parseInt(j.g.style.height,10))}function b(a){var b=ma(j.g);j.g.style.width=a.pageX-b.left+"px";j.g.style.height=a.pageY-b.top+"px"}M(j.g,s("div",{id:"de-txt-resizer"},{mousedown:function(c){x(c);S(l.body,{mousemove:b,mouseup:a})}}))}function tc(a){D(a.querySelectorAll('input[type="file"]'),
function(a){S(a,{change:te})})}function ue(a){D(a.querySelectorAll(".de-file-util"),w);D(a.querySelectorAll('input[type="file"]'),function(a){a.ca=m})}function te(){this.lc?this.ca&&(this.ca=m,w(this.nextSibling)):(this.lc=i,M(this,s("button",{"class":"de-file-util de-file-del",text:mb[h],type:"button"},{click:function(a){x(a);a=this.parentNode;ue(a);S(j.file=Ud('input[type="file"]',Vd(a,a.innerHTML)),{change:te})}})));!d.D&&!d.b&&(w(z("de-file-rar",this.parentNode)),/^image\/(?:png|jpeg)$/.test(this.files[0].type)&&
M(this,s("button",{"class":"de-file-util de-file-rar",text:rd[h],type:"button"},{click:function(a){x(a);var a=p("de-file-rar")||l.body.appendChild(s("input",{id:"de-file-rar",type:"file",style:"display: none;"},m)),b=this.parentNode.querySelector('input[type="file"]'),c=this;a.onchange=function(){w(c);var a=this.files[0],k=new FileReader,d=C('<span class="de-file-util" style="margin: 0 5px;"><span class="de-wait"></span>'+sd[h]+"</span>");M(b,d);k.onload=function(){if(b.nextSibling===d){R(d,{style:"font-weight: bold; margin: 0 5px; cursor: default;",
title:b.files[0].name+" + "+a.name,text:"rarJPEG"});b.ca=this.result}d=b=a=m};k.readAsArrayBuffer(a);c=m};a.click()}})));tc(j.U(this))}function ve(a,b,c){j.form.style.display="inline-block";j.form.style.textAlign="left";g.d?S(j.g,{mouseup:function(){O("textaWidth",parseInt(this.style.width,10));O("textaHeight",parseInt(this.style.height,10))}}):Af();pc();j.g.style.cssText="padding: 0; width: "+f.textaWidth+"px; height: "+f.textaHeight+"px;";S(j.g,{keypress:function(a){var b=a.charCode||a.keyCode;
if((33===b||34===b)&&0===a.which)a.target.blur(),window.focus()}});S(j.qa,{click:function(){var a=j.g.value,b=f.signatValue;E.yb&&(a=E.rc(a));f.userSignat&&b&&(a+="\n"+b);if(j.M&&"Dollchan Extension Tools"===(z("filetitle",I[j.M])||{}).textContent&&!/`\-{50}`$/.test(a))a+="\n\n`--------------------------------------------------`\n`"+window.navigator.userAgent+"`\n`v"+f.version+"`\n`--------------------------------------------------`";j.g.value=a;f.ajaxReply&&K(Rb[h],"upload",i);f.favOnReply&&j.M&&
be(I[j.M],z("de-btn-fav",I[j.M].G));j.M?da.reply=+da.reply+1:da.op=+da.op+1;J("DESU_Stat_"+d.c,JSON.stringify(da));if(j.sa&&(a=j.sa.value)&&(a=a.match(yb())))j.sa.value=d.R?a[1]:"http://www.youtube.com/watch?v="+a[1];j.K&&(H(p("de-qarea")),M(p("de-togglereply"),p("de-pform")))}});D(j.form.querySelectorAll('input[type="text"], input[type="file"]'),function(a){a.size=30});f.noGoto&&j.za&&H(j.za);f.noPassword&&j.V&&H(j.U(j.V));S(window,{load:function(){f.userName&&j.name&&setTimeout(qc,1E3);j.V&&setTimeout(ke,
1E3)}});j.da&&(R(j.qa,{onclick:"Recaptcha.focus_response_field = function() {}"}),(c=p("recaptcha_image"))&&R(c,{onclick:"Recaptcha.reload()",style:"width: 300px; cursor: pointer;"}));if(j.l&&(d.D&&setTimeout(function(){fb(0);j.l.onclick=m},50),j.l.autocomplete="off",j.l.onfocus=m,j.l.onkeypress=function(a){if(f.captchaLang&&a.which!==0){var b,c=a.charCode||a.keyCode,d=String.fromCharCode(c).toLowerCase();if(f.captchaLang===1){if(c<1040||c>1279||(b="йцукенгшщзхъфывапролджэячсмитьбюё".indexOf(d))===
-1)return;d="qwertyuiop[]asdfghjkl;'zxcvbnm,.`"[b]}else{if(c<33||c>122||(b="qwertyuiop[]asdfghjkl;'zxcvbnm,.`".indexOf(d))===-1)return;d="йцукенгшщзхъфывапролджэячсмитьбюё"[b]}x(a);Va(a.target,d)}},!d.j&&!j.da)){a=Ud("a, img",j.U(j.l));b=s("img",{alt:ra[h],title:td[h],style:"display: block; border: none; cursor: pointer;"},{click:function(){fb(q||
0)}});if(a)a.parentNode.replaceChild(b,a);else{for(;j.l.nextSibling;)w(j.l.nextSibling);M(j.l,b)}setTimeout(function(b){b.src=re(d.fa?"/faptcha.php?board="+u:d.Ab?"/securimage/securimage_show.php?"+Math.random():d.H?"/"+u.substr(0,u.indexOf("/")+1)+"captcha.php?"+Math.random():a?a.src:"/"+u+"/captcha.pl?key=mainpage&amp;dummy="+Math.random(),q||0)},50,b)}f.addSageBtn&&j.Q&&(b=s("span",{id:"de-sagebtn"},{click:function(a){a.stopPropagation();x(a);wb("sageReply");se()}}),c=aa("ancestor::label",j.Q)||
j.Q,c.nextElementSibling||c.previousElementSibling?(H(c),M(c,b)):(H(j.U(j.Q)),M(j.name||j.qa,b)),setTimeout(se,0));if(2===f.ajaxReply){if(j.form.onsubmit=function(a){x(a);uc(new zb(j.form,j.qa),we)},y.onsubmit=x,b=y.querySelector(d.wc))b.onclick=function(a){x(a);Ea();K(Zb[h],"deleting",i);uc(new zb(y,this),xe)}}else 1===f.ajaxReply&&(ga(p("de-main"),[C('<iframe id="de-iframe-pform" name="de-iframe-pform" src="about:blank"/>'),C('<iframe id="de-iframe-dform" name="de-iframe-dform" src="about:blank"/>')]),
R(j.form,{target:"de-iframe-pform"}).onsubmit=m,R(y,{target:"de-iframe-dform"}).onsubmit=function(){Ea();K(Zb[h],"deleting",i)});j.file&&tc(j.U(j.file))}function ye(a){if(!a.body.firstChild||a.querySelector(d.na))return"";var b="";D(a.querySelectorAll(d.j?".post-error, h2":d.H?'h1, h2, div[style*="1.25em"]':d.b?"#errmsg":d.f?".message_text":d.n?"pre":'h1, h2, font[size="5"]'),function(a){b+=a.innerHTML+"\n"});(b=b.replace(/<a [^>]+>Назад.+|<br.+/,""))||(b=qb[h]+"\n"+a.body.innerHTML);
return/successful|uploaded|updating|обновл|удален[о\.]/i.test(b)?"":b.replace(/"/g,"'")}function ze(){ja(p("de-alert-upload"))}function we(a,b){var c;a?(j.K&&(H(c=p("de-qarea")),c.appendChild(p("de-pform"))),j.l&&/captch|капч|подтвер/i.test(a)&&(j.l.value="",j.l.focus(),fb(j.M)),K(a,"upload",n)):(j.g.value="",j.file&&(c=j.U(j.file),ue(c),c=Vd(c,c.innerHTML),j.file=c.querySelector('input[type="file"]'),
tc(c)),j.sa&&(j.sa.value=""),c=j.M)?(Ea(),q?Ab(ze):eb(I[c],5,ze),j.l&&(j.l.value="",fb(c))):window.location=b}function Ae(a,b){if(b)return window.location;var c=a.querySelector(d.na);return c?d.J(u,d.xa(c)):""}function Be(){var a=p("de-alert-deleting");a&&(ja(a),K(ud[h],"deleted",n))}function xe(a){var b=[];a?K(vd[h]+a,"deleting",n):(D(y.querySelectorAll("[de-post] input:checked"),!q?function(a){a=ba(a).N.a;-1===b.indexOf(a)&&b.push(a)}:function(a){a.checked=n}),q?Ab(Be):b.forEach(function(a){eb(I[a],
5,Be)}));b=m}function uc(a,b){if(!a.error)if(0<a.Ta)setTimeout(uc,200,a,b);else{var c={"Content-type":"multipart/form-data; boundary="+a.va};g.d&&(c.Referer=""+l.location);a.data.push("--"+a.va+"--\r\n");GM_xmlhttpRequest({method:"POST",headers:c,data:new Blob(a.data),url:g.Ua(a.url),onreadystatechange:function(a){4===a.readyState&&(200===a.status?(a=g.Ob(a.responseText),b(ye(a),Ae(a,n)),b=m):K(0===a.status?sa[h]:"HTTP ["+a.status+"] "+a.statusText,"upload",n))}})}}function Bf(a,b){var c,e,k,d,o,
t,wa,h=!!f.removeEXIF;if(!f.postSameImg&&!h&&!b)return[a];if(255===a[0]&&216===a[1]){e=2;k=0;o=1;d=a.length-1;wa=[2];for(t=m;e<d;){if(255===a[e]){if(h){if(!t&&1===o)if(225===a[e+1]&&69===a[e+4])a:{var g=e+10;c=(a[e+2]<<8)+a[e+3];var j=t=ya,l=ya,p=ya,q=ya,r=0,s=0,w=0,u="MM"!==String.fromCharCode(a[g],a[g+1]),g=new DataView(a.buffer,g);if(42!==g.getUint16(2,u))t=m;else if(t=g.getUint32(4,u),t>c)t=m;else{q=g.getUint16(t,u);for(j=0;j<q;j++)if(p=g.getUint16(l=t+2+12*j,u),!(282!==p&&283!==p&&296!==p))if(296===
p)w=g.getUint16(l+8,u)-1;else{l=g.getUint32(l+8,u);if(l>c){t=m;break a}282===p?r=Math.round(g.getUint32(l,u)/g.getUint32(l+4,u)):s=Math.round(g.getUint32(l,u)/g.getUint32(l+4,u))}r=r||s;s=s||r;t=[w,r>>8,r&255,s>>8,s&255]}}else 224===a[e+1]&&70===a[e+7]&&(t=[a[e+11],a[e+12],a[e+13],a[e+14]]);if(14===a[e+1]>>4||254===a[e+1]){c=2+(a[e+2]<<8)+a[e+3];k+=c;wa.push(e,e+=c);continue}}if(216===a[e+1])o++;else if(217===a[e+1]&&0===--o)break}e++}e+=2;!b&&75<d-e&&(e=d);if(0===k)return e===d?[a]:[new Uint8Array(a,
e)];wa.push(e);o=new Uint8Array(e-k+18);o.set([255,216,255,224,0,16,74,70,73,70,0,1,1].concat(t||[0,0,1,0,1]),0);e=0;k=20;for(d=wa.length;e<d;e+=2)o.set(a.subarray(wa[e],wa[e+1]),k),k+=wa[e+1]-wa[e];return[o]}if(137===a[0]&&80===a[1]){e=0;for(d=a.length-7;e<d&&(73!==a[e]||69!==a[e+1]||78!==a[e+2]||68!==a[e+3]);e++);e+=8;return e===d||!b&&75<d-e?[a]:[new Uint8Array(a,e)]}return m}function zb(a,b){this.va="---------------------------"+Math.round(1E11*Math.random());this.data=[];this.Ta=0;this.error=
n;this.url=a.action;D(a.querySelectorAll('input:not([type="submit"]):not([type="button"]), textarea, select'),this.append.bind(this));this.append(b)}function sc(a){var b=a.N.a,c=p("de-qarea");j.M=b;if(j.K){if(d.ya(a).nextElementSibling===c){H(c);Ea();return}}else j.K=i,c.appendChild(p("de-pform")),H(p("de-togglereply")),!q&&!d.H&&!d.j&&(w(j.form.querySelector('#thr_id, input[name="parent"]')),Y(j.form.firstChild,C('<input type="hidden" id="thr_id" value="'+b+'" name="'+(d.b||d.k?"resto":d.r?"thread":
"parent")+'">')),$&&(w($.querySelector('input[name="oek_parent"]')),Y($.firstChild,C('<input type="hidden" value="'+b+'" name="oek_parent">'))));M(d.ya(a),c);c.style.display="";q||(Ce(b),f.noThrdForm&&(p("de-parea").style.display="none"));j.l&&!j.da&&!d.H&&fb(b);d.n&&"Comment"===j.g.value&&(j.g.value="");Va(j.g,">>"+a.a+(Oa||"").replace(/(?:^|\n)(.)/gm,"\n> $1")+"\n");3===f.addPostForm&&R(Q("a",p("de-qarea-target")),{href:d.J(u,b),text:"#"+b})}function Ea(){if(j.K){var a=p("de-togglereply"),b=p("de-qarea");
j.K=n;q||(Ce(0),w(p("thr_id")));H(a);b.style.display="none";M(p("de-parea"),b);M(a,p("de-pform"))}}function Ce(a){j.form.querySelector('#thr_id, input[name*="thread"]').value=a;$&&($.querySelector('input[name="oek_parent"], input[name="replyto"]').value=a);d.Gb&&(j.form.querySelector('input[name="quickreply"]').value=a||"")}function fe(a){var b=p("de-parea");x(a);j.K?(b.style.display="",Ea()):H(b);ec(b)}function Cf(a){/Reply|Ответ/.test(a.target.textContent)||((a.stopPropagation(),
x(a),!q&&f.noThrdForm&&!j.K&&(p("de-parea").style.display=""),a=ba(a.target).a,q&&1<f.addPostForm&&!j.K)?sc(I[a]):(d.n&&"Comment"===j.g.value&&(j.g.value=""),Va(j.g,">>"+a)))}function pc(){if(j.g){var a=d.H||d.f||d.n||d.L||d.D,b={bold:[d.n?"**":a?"b":"**","B"],italic:[d.n?"*":a?"i":"*","i"],under:[a?"u":"__","U"],strike:[d.L?"-":a?"s":d.fa?"^^":"","S"],spoil:[d.L?"s":d.n?"%":a||d.b?"spoiler":"%%","%"],code:[d.L?"c":d.f?"aa":d.n?"pre":a?"code":"`","C"],quote:[,"&gt;"]},c=function(e){var k=j.g,v=p("de-btn-"+
e),o=b[e][1];v||(v=s("span",{id:"de-btn-"+e,title:wd[e][h]},m),"&gt;"!==o?v.onclick=function(c){var e,v,o=k.selectionStart,f=k.selectionEnd,h=k.scrollTop,g=k.value.substring(o,f).split("\n"),j=g.length;e=b[this.id.substring(7)][0];x(c);a||d.b&&"spoiler"===e?(c="["+e+"]",e="[/"+e+"]"):c=e;for(;j--;){if(!c)for(v=g[j].trim().length;v--;)e+="^H";v=f+c.length+e.length;g[j].match(/^\s+/)&&(c=g[j].match(/^\s+/)[0]+c);g[j].match(/\s+$/)&&(e+=g[j].match(/\s+$/)[0]);g[j]=c+g[j].trim()+e}k.value=k.value.substr(0,
o)+g.join("\n")+k.value.substr(f);k.setSelectionRange(v,v);k.focus();k.scrollTop=h}:(v.onmouseover=function(){Oa=fc()},v.onclick=function(a){var b=k.selectionStart,c=k.selectionEnd;x(a);Va(k,"> "+(b===c?Oa:k.value.substring(b,c)).replace(/\n/gm,"\n> "))}),p("de-txt-panel").appendChild(v));v.innerHTML=2===f.addTextBtns?("B"===o?"[ ":"")+'<a href="#">'+o+"</a>"+("&gt;"!==o?" / ":" ]"):3===f.addTextBtns?'<input type="button" value="'+o+'" style="font-weight: bold;" />':"";return c};M(f.txtBtnsLoc?p("de-txt-resizer")||
j.g:d.n?z("popup",j.form):j.qa,R(p("de-txt-panel")||s("span",{id:"de-txt-panel"},m),{lang:!f.addTextBtns?"en":!f.txtBtnsLoc?"ru":""}));c("bold")("italic");d.n||c("under")("strike");c("spoil")("code")("quote")}}function vc(a){var b,c=a.querySelector(d.Jb),e='<span class="de-ppanel '+(a.p?"":"de-ppanel-cnt")+'" info="'+a.a+'"><span class="de-btn-hide" onclick="de_hideClick(this)" onmouseover="de_hideOver(this)" onmouseout="de_btnOut(event)"></span>'+(j.vc||$?'<span class="de-btn-rep" onclick="de_qReplyClick(this)" onmouseover="de_qReplyOver(this)"></span>':
"");a.p&&(b=d.host,q||(e+='<span class="de-btn-expthr" onclick="de_expandClick(this)" onmouseover="de_expandOver(this)" onmouseout="de_btnOut(event)"></span>'),F[b]&&F[b][u]&&F[b][u][a.a]?(e+='<span class="de-btn-fav-sel" onclick="de_favorClick(this)"></span>',F[b][u][a.a].sb=a.N.S+1):e+='<span class="de-btn-fav" onclick="de_favorClick(this)"></span>');g.la(c,e+(a.Nb?'<span class="de-btn-sage" title="SAGE" onclick="de_sageClick(this)"></span>':"")+"</span>");a.G=c.nextSibling;j.form&&f.insertNum&&
((d.R||q&&(d.H||d.Fa))&&D(c.getElementsByTagName("a"),function(a){a.onclick=m}),d.F||(c.onclick=Cf))}function Df(){rb('function de_removeSel() {\t\t\tvar el = document.getElementById("de-select");\t\t\tif(el) {\t\t\t\tel.parentNode.removeChild(el);\t\t\t}\t\t}\t\tfunction de_delSelection(e) {\t\t\tif(e.relatedTarget && !document.evaluate("ancestor-or-self::div[@id=\'de-select\']", e.relatedTarget, null, 3, null).booleanValue) {\t\t\t\tde_removeSel();\t\t\t}\t\t}\t\tfunction de_btnOut(e) {\t\t\tclearTimeout(e.target.de_overDelay);\t\t\tde_delSelection(e);\t\t}\t\tfunction de_btnOver(el, data) {\t\t\tel.de_overDelay = setTimeout(function(msg) {\t\t\t\twindow.postMessage(msg, "*");\t\t\t}, '+
f.linksOver+', data);\t\t}\t\tfunction de_hideOver(el) {\t\t\tde_btnOver(el, "A" + el.parentNode.getAttribute("info"));\t\t}\t\tfunction de_imgSOver(el) {\t\t\tde_btnOver(el, "L" + el.getAttribute("de-id"));\t\t}\t\tfunction de_expandOver(el) {\t\t\tde_btnOver(el, "B" + el.parentNode.getAttribute("info"));\t\t}\t\tfunction de_hideClick(el) {\t\t\twindow.postMessage("D" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_qReplyClick(el) {\t\t\twindow.postMessage("F" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_qReplyOver(el) {\t\t\twindow.postMessage("C" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_expandClick(el) {\t\t\twindow.postMessage("E" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_favorClick(el) {\t\t\twindow.postMessage("G" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_sageClick(el) {\t\t\twindow.postMessage("H" + el.parentNode.getAttribute("info"), "*");\t\t}\t\tfunction de_cImgSearch(e, name) {\t\t\te.preventDefault();\t\t\twindow.postMessage("_" + name + ";" + e.target.getAttribute("de-url"), "*");\t\t\tde_removeSel();\t\t}');
S(window,{message:function(a){var b=a.data.substring(1);switch(a.data[0]){case "A":new pe(I[+b]);break;case "B":xf(I[+b]);break;case "C":Oa=fc();break;case "D":a=I[+b];Ma(a,!a.h);Ka();break;case "E":eb(I[+b],1,m);break;case "F":sc(I[+b]);break;case "G":a=I[+b];be(a,z("de-btn-fav",a)||z("de-btn-fav-sel",a));break;case "H":Pa("#sage","");break;case "I":w(p("de-fav-wait"));p("de-iframe-fav").style.height=b+"px";break;case "J":a=b.split("$#$");"de-iframe-pform"===a[0]?we(a[1],a[2]):xe(a[1]);p(a[0]).src=
"about:blank";break;case "L":yf(y.querySelector('.de-btn-src[de-id="'+b+'"]'))}}});g.ba||rb('(function() {\t\t"use strict";\t\twindow.addEventListener("message", function(e) {\t\t\tvar id = e.data[0],\t\t\t\tdata = e.data.substring(1);\t\t\tif(id === "K") {\t\t\t\tvar mReqs = data === "all" ? 4 : 1, i = mReqs, rjw'+(f.findRarJPEG?'= []; while(i--) rjw.push(new Worker("'+window.URL.createObjectURL(new Blob(["self.onmessage = "+Ef]))+'"));':";")+"preloadImages(data, mReqs, rjw);\t\t\t\treturn;\t\t\t}\t\t});\t\tvar doc = document,\t\t\t$x = "+
(""+aa)+",\t\t\tgetPostImages = "+(""+Ha)+",\t\t\tgetPicWrap = "+(""+d.xb)+";\t\tfunction preloadImages(pNum, mReqs, rjw) {\t\t\tvar len, el, cReq = 0, i = 0, arr = [],\t\t\t\tbwrk = mReqs === 4 ? [0, 0, 0, 0] : [0],\t\t\t\tloadFunc = function(idx) {\t\t\t\t\tif(idx >= arr.length) {\t\t\t\t\t\tif(cReq === 0) {\t\t\t\t\t\t\tmReqs = cReq = i = arr = loadFunc = null;\t\t\t\t\t\t}\t\t\t\t\t\treturn;\t\t\t\t\t}\t\t\t\t\tvar xhr, url, type, eImg = "+!!f.noImgSpoil+",\t\t\t\t\t\ta = arr[idx];\t\t\t\t\tif(!a || !(url = a.href)) {\t\t\t\t\t\tloadFunc(i++);\t\t\t\t\t\treturn;\t\t\t\t\t}\t\t\t\t\tif(/.gif$/i.test(url)) {\t\t\t\t\t\teImg |= "+
!!f.showGIFs+';\t\t\t\t\t\ttype = "image/gif";\t\t\t\t\t} else if(/.jpe?g$/i.test(url)) {\t\t\t\t\t\ttype = "image/jpeg";\t\t\t\t\t} else if(/.png$/i.test(url)) {\t\t\t\t\t\ttype = "image/png";\t\t\t\t\t} else {\t\t\t\t\t\tloadFunc(i++);\t\t\t\t\t\treturn;\t\t\t\t\t}\t\t\t\t\tif(cReq === mReqs) {\t\t\t\t\t\tsetTimeout(loadFunc, 500, idx);\t\t\t\t\t\treturn;\t\t\t\t\t}\t\t\t\t\tcReq++;\t\t\t\t\txhr = new XMLHttpRequest();\t\t\t\t\txhr.open("GET", url, true);\t\t\t\t\txhr.responseType = "arraybuffer";\t\t\t\t\txhr.onload = function() {\t\t\t\t\t\tif(this.status == 200) {\t\t\t\t\t\t\ta.download = url.substring(url.lastIndexOf("/") + 1);\t\t\t\t\t\t\tvar href = a.href = window.'+
(g.m?"webkit":"")+'URL.createObjectURL(new Blob([new Uint8Array(this.response)], {"type": type}));\t\t\t\t\t\t\tif(eImg) {\t\t\t\t\t\t\t\ta.getElementsByTagName("img")[0].src = href;\t\t\t\t\t\t\t}'+(f.findRarJPEG?"parseRJ(a);":"")+"cReq--; loadFunc(i++); a = eImg = url = type = null;\t\t\t\t\t\t}\t\t\t\t\t};\t\t\t\t\txhr.send(null);\t\t\t\t}"+(f.findRarJPEG?",\t\t\t\tparseRJ = function(link) {\t\t\t\t\tvar wI = bwrk.indexOf(0), w;\t\t\t\t\tif(wI === -1) {\t\t\t\t\t\tsetTimeout(parseRJ, 500, link);\t\t\t\t\t\treturn;\t\t\t\t\t}\t\t\t\t\tw = rjw[wI];\t\t\t\t\tbwrk[wI] = 1;\t\t\t\t\tw.onmessage = function(e) {\t\t\t\t\t\tif(e.data) {\t\t\t\t\t\t\tvar el = getPicWrap(link);\t\t\t\t\t\t\tif(el) {\t\t\t\t\t\t\t\tel.querySelector('"+
d.Hb+'\').className += " de-archive";\t\t\t\t\t\t\t}\t\t\t\t\t\t}\t\t\t\t\t\tbwrk[wI] = 0;\t\t\t\t\t\tlink = wI = null;\t\t\t\t\t};\t\t\t\t\tw.onerror = function(e) {\t\t\t\t\t\tconsole.error("RARJPEG ERROR, line: " + e.lineno + " - " + e.message);\t\t\t\t\t\tbwrk[wI] = 0;\t\t\t\t\t\tlink = wI = null;\t\t\t\t\t};\t\t\t\t\tw.postMessage(link.href);\t\t\t\t};':";")+'el = getPostImages(pNum === "all" ? doc : doc.querySelector("[de-post=\'" + pNum + "\']"));\t\t\tfor(i = 0, len = el.length; i < len; i++) {\t\t\t\tarr.push($x("ancestor::a[1]", el[i]));\t\t\t}\t\t\tfor(i = 0; i < mReqs; i++) {\t\t\t\tloadFunc(i);\t\t\t}\t\t}})()')}
function va(a,b,c,e,k){va.qb(a)?this.disabled=i:(this.Mb=a.replace(/(?:[sihdny]\?){2,}/g,function(a){return"(?:"+a.replace(/\?/g,"")+")?"}).replace(/\-/g,"[^<]").replace(/\+/g,"[^0-9]").replace(/([sihdny]+)/g,"($1)").replace(/[sihdny]/g,"\\d").replace(/m|w/g,"([a-zA-Zа-яА-Я]+)"),this.pattern=a.replace(/[\?\-\+]+/g,"").replace(/([a-z])\1+/g,"$1"),this.fc=parseInt(b,10),this.ac=xd[c],this.$b=yd[c],this.Zb=zd[c],e&&k&&Ya(e)===+k&&(this.Bb=i,this.oa=e.substring(1),this.Va=!!+e[0]))}
function Ff(a,b){GM_xmlhttpRequest({method:"GET",url:"https://www.youtube.com/watch?v="+a,onload:function(a){var e,k,d,o,f=[];e="%2C";var g="%26",h="%3D";if(k=a.responseText.match(/\"url_encoded_fmt_stream_map\":\s*\"([^\"]+)\"/)){k=k[1];k.contains(",")&&(e=",",g=k.contains("&")?"&":"\\u0026",h="=");a=0;e=k.split(e);for(k=e.length;a<k;a++)d=e[a].split(g),5>d.length||(o=d[0].split(h),2>o.length||(o=unescape(unescape(o[1])).replace(/\\\//g,"/").replace(/\\u0026/g,"&"),d=d[4].split(h),2>d.length||0===
o.toLowerCase().indexOf("http")&&(f[d[1]]=o)));b(f)}else b(n);b=m}})}function De(a,b,c){var e=' width="'+f.YTubeWidth+'" height="'+f.YTubeHeigh+'" />';a.innerHTML=1===f.YTubeType?'<iframe type="text/html" src="https://www.youtube.com/embed/'+b+(f.YTubeHD?"?hd=1&":"?")+"start="+c+'&html5=1" frameborder="0"'+e:'<embed type="application/x-shockwave-flash" src="https://www.youtube.com/v/'+b+(f.YTubeHD?"?hd=1&":"?")+"start="+c+'" wmode="transparent"'+e}function wc(a,b){var c=b[1],e=(b[2]?3600*b[2]:0)+
(b[3]?60*b[3]:0)+(b[4]?+b[4]:0);2!==f.YTubeType?De(a,c,e):Ff(c,function(b){(b=b?!f.YTubeHD?b[43]:b[45]||b[44]||b[43]:n)?(a.innerHTML='<video poster="https://i.ytimg.com/vi/'+c+'/0.jpg" controls="controls" preload="none" src="'+b+(g.d&&14>g.d?"&"+Math.random():"")+'" width="'+f.YTubeWidth+'" height="'+f.YTubeHeigh+'"></video>',0!==e&&(a.firstChild.Jc=function(){this.currentTime=e;e=m})):De(a,c,e)})}function Ee(a,b){if(b){var c=z("de-ytube-obj",a);c.A=b.A;b.Pb&&Fe(c)}}function Ge(a,b){ta.forEach.call(U("de-ytube-link",
a),function(b,e){var d=this[e];d?(b.onclick=He,b.A=d.A):Ie(b,b.href.match(yb()),a)},b)}function Fe(a){a.Pb=i;a.firstChild.onclick=function(a){x(a);a=this.parentNode;a.Pb=n;wc(a,a.A)}}function Je(a,b){a.innerHTML='<a href="https://www.youtube.com/watch?v='+b[1]+'" target="_blank"><img src="https://i.ytimg.com/vi/'+b[1]+'/0.jpg" width="360" height="270" /></a>';3===f.addYouTube&&Fe(a)}function yb(){return/^https?:\/\/(?:www\.)?youtu(?:be\.com\/(?:watch\?.*?v=|v\/|embed\/)|\.be\/)([^&#?]+).*?(?:t(?:ime)?=(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s?)?)?$/}
function He(a){var b=this.A,c=z("de-ytube-obj",ba(this));x(a);c.A===b?(c.innerHTML="",c.A=m):(2<f.addYouTube?Je(c,b):wc(c,b),c.A=b)}function Ie(a,b,c){var e,k;c.gb||((c.gb=k=s("div",{"class":"de-ytube-obj"},m),2<f.addYouTube?(k.A=b,Je(k,b)):2===f.addYouTube&&(k.A=b,wc(k,b)),c=c.i||c.querySelector(d.v),d.f)?(c=c.parentNode,e=c.previousElementSibling,Y(e.hasAttribute("style")?e:c,k)):Y(c,k));a.href=a.href.replace(/^http:/,"https:");a.A=b;a.className="de-ytube-link";a.onclick=He;f.YTubeTitles?(a.eb=
1,GM_xmlhttpRequest({method:"GET",url:"https://gdata.youtube.com/feeds/api/videos/"+b[1]+"?alt=json&fields=title/text(),media:group/media:keywords",onreadystatechange:function(b){if(4===b.readyState){if(200===b.status)try{a.textContent=JSON.parse(b.responseText).entry.title.$t;a.eb=2;return}catch(c){}a.eb=3;a=pst=m}}})):a.textContent=a.textContent.replace(/^http:/,"https:")}function Bb(a){f.addYouTube&&(D((a||y).querySelectorAll("embed, object, iframe"),function(b){var c,e;if(e=(b.src||b.data).match(yb())){c=
"https://www.youtube.com/watch?v="+e[1];if(e[4]||e[3]||e[2])c+="#t="+(e[2]?e[2]+"h":"")+(e[3]?e[3]+"m":"")+(e[4]?e[4]+"s":"");e=a||ba(b);(e.i||e.querySelector(d.v)).appendChild(C('<p class="de-ytube-ext"><a href="'+c+'">'+c+"</a></p>"));w(b)}}),D((a||y).querySelectorAll('a[href*="youtu"]'),function(b){var c=b.href.match(yb());c&&Ie(b,c,a||ba(b))}))}function Cb(a){f.addMP3&&D((a||y).querySelectorAll('a[href*=".mp3"]'),function(b){if("_blank"===b.target||"nofollow"===b.rel){var c=a||ba(b),e=z("de-mp3",
c);e||(e=s("div",{"class":"de-mp3"},m),Y(c.i||c.querySelector(d.v),e));e.querySelector('object[FlashVars*="'+b.href+'"]')||(e.innerHTML+='<object data="//junglebook2007.narod.ru/audio/player.swf" type="application/x-shockwave-flash" wmode="transparent" width="220" height="16" FlashVars="playerID=1&amp;bg=0x808080&amp;leftbg=0xB3B3B3&amp;lefticon=0x000000&amp;rightbg=0x808080&amp;rightbghover=0x999999&amp;rightcon=0x000000&amp;righticonhover=0xffffff&amp;text=0xffffff&amp;slider=0x222222&amp;track=0xf5f5dc&amp;border=0x666666&amp;loader=0x7fc7ff&amp;loop=yes&amp;autostart=no&amp;soundFile='+
b.href+'" /><br>')}})}function Gf(a){function b(){bc(l.body,{mousemove:c,mouseup:b})}function c(b){a.style.left=b.clientX-a.cc+"px";a.style.top=b.clientY-a.dc+"px";a.Eb=i}a.onmousedown=function(e){x(e);a.cc=e.clientX-parseInt(a.style.left,10);a.dc=e.clientY-parseInt(a.style.top,10);S(l.body,{mousemove:c,mouseup:b})}}function Hf(a){var b=a.clientX,c=a.clientY,e=parseInt(this.style.left,10),d=parseInt(this.style.top,10),v=parseFloat(this.style.width||this.width),o=parseFloat(this.style.height||this.height),
f=g.d?-a.detail:a.wheelDelta,h=v*(0<f?1.25:0.8),f=o*(0<f?1.25:0.8);x(a);this.style.width=h+"px";this.style.height=f+"px";this.style.left=parseInt(b-h/v*(b-e),10)+"px";this.style.top=parseInt(c-f/o*(c-d),10)+"px"}function Ke(a,b,c){var e="",d="",v=+b[0],b=+b[1],o=l.body.clientWidth,t=window.innerHeight,h=z("de-img-full",a);if(!(h&&c||!h&&c===n))if(1===f.expandImgs&&!a.querySelector('img[style*="fixed"]')&&H(Q("img",a)),h)h.Eb?h.Eb=n:(H(h),setTimeout(w,0,h));else if(1===f.expandImgs?o-=ma(a).left+25:
w(z("de-img-center",l)),v&&b&&(e=v<o?v:o,d=e*b/v,2===f.expandImgs&&d>t&&(d=t,e=d*v/b)),h=a.appendChild(C('<img class="de-img-full" src="'+a.href+'" alt="'+a.href+'" width="'+e+'" height="'+d+'"/>')),2===f.expandImgs)g.s(h,"de-img-center"),h.style.cssText="left: "+(o-e)/2+"px; top: "+(t-d)/2+"px;",h.addEventListener(g.d?"DOMMouseScroll":"mousewheel",Hf,n),Gf(h)}function Le(a){a.onclick=function(a){f.expandImgs&&1!==a.button&&(x(a),Ke(this,this.firstChild.title.split("x"),m))}}function Db(a){if(f.addImgs)for(var b,
c=0,e=a.querySelectorAll(d.v+' a[href*=".jpg"], '+d.v+' a[href*=".png"], '+d.v+' a[href*=".gif"]'),k=e.length;c<k;c++){b=e[c];if("SMALL"===b.parentNode.tagName)break;a=b.cloneNode(n);a.target="_blank";H(a);a.appendChild(s("img",{"class":"de-img-pre",src:a.href,alt:a.href},{load:function(){var a,b;H(this.parentNode);a=this.width;b=this.height;this.title=a+"x"+b;200>=a&&200>=b||(a/=b,this.width=1>a?200*a:200,this.height=1>a?200:200/a)}}));Le(a);Y(b,a)}}function Eb(a){if(f.imgSrcBtns)for(var b=a.a||
"",a=a.querySelectorAll(d.Hb),c=a.length-1,e;0<=c;c--)e=a[c],/google\.|tineye\.com|iqdb\.org/.test(e.href)?w(e):e.firstElementChild||g.Ya(e,'<span de-id="'+b+c+'" class="de-btn-src" onmouseover="de_imgSOver(this)" onmouseout="de_btnOut(event)"></span>')}function Me(a,b){/\.jpe?g|\.png|.\gif|^blob:/i.test(a.href)&&Ke(a,hc(d.xb(a)),b)}function lc(a,b){D(a.P,function(a){Me(aa("ancestor::a[1]",a),b)})}function Fb(a){D(a.P,function(a){var c=aa("ancestor::a[1]",a);c&&(a.onclick=m,d.ub&&(a.parentNode.onclick=
m),c.onclick=function(a){if(a.button!==1){x(a);Me(this,m)}})})}function Ef(a){var b,c,e;b=new XMLHttpRequest;b.open("GET",a.data,n);b.responseType="arraybuffer";b.send();a=new Uint8Array(b.response);e=a.length;if(255===a[0]&&216===a[1])for(c=b=0;b<e-1;b++){if(255===a[b])if(216===a[b+1])c++;else if(217===a[b+1]&&0===--c){b+=2;break}}else if(137===a[0]&&80===a[1])for(b=0;b<e-7;b++){if(73===a[b]&&69===a[b+1]&&78===a[b+2]&&68===a[b+3]){b+=8;break}}else{self.postMessage(n,m);return}if(b!==e&&60<e-b)for(e=
b+50;b<e;b++)if(55===a[b]&&122===a[b+1]||80===a[b]&&75===a[b+1]||82===a[b]&&97===a[b+1]){self.postMessage(i,m);return}self.postMessage(n,m)}function Ne(a){var b='<div class="de-refmap">'+a.w.join(", ").replace(/(\d+)/g,'<a href="#$1">&gt;&gt;$1</a>')+"</div>";try{g.la(a.i,b)}catch(c){a.appendChild(C(b))}}function xc(a){var b=[];g.forEach(a,function(c){for(var e,d,v=this[c].i.getElementsByTagName("a"),o=v.length-1;0<=o;o--)if((e=v[o].textContent.match(/^>>(\d+)$/))&&(d=a[e[1]]))d.w?-1===d.w.indexOf(c)&&
d.w.push(c):(d.w=[c],b.push(d))});b.forEach(Ne);b=a=m}function Gb(a){if(a){a.parent?a.parent.aa=m:pa=m;do{clearTimeout(a.Bc);var b=a;f.animation?(g.Y(b,w),g.s(b,"de-pview-anim"),b.style[g.ia]="de-post-close-"+(b.nb?"t":"b")+(b.mb?"l":"r")):w(b)}while(a=a.aa)}}function db(a,b){a&&(clearTimeout(lb),lb=setTimeout(Gb,f.linksOut,b?a:a.aa))}function yc(){this.style[g.ia]&&(g.W(this,"de-pview-anim"),this.style.cssText=this.Ca,this.Ca=n,D(U("de-css-move",l.head),w),this.removeEventListener(g.ha,yc,n))}function Oe(a,
b,c){if(b.link!==a){b.link=a;var e,d;e=a.getBoundingClientRect();d=e.left+window.pageXOffset+a.offsetWidth/2;var v=e.top+window.pageYOffset,o=l.body.clientWidth,t=d<o/2,o=(t?o-d:d)-10,h="max-width:"+o+"px; left:"+(t?d:d-Math.min(parseInt(b.offsetWidth,10),o))+"px;";c?(o=b.style.cssText,b.style.cssText="opacity: 0; "+h):b.style.cssText=h;d=b.offsetHeight;e=d+e.top+a.offsetHeight<window.innerHeight||5>e.top-d;d=(e?v+a.offsetHeight:v-d)+"px";b.mb=t;b.nb=e;!f.animation||!c?b.style.top=d:(a="de-movecss-"+
Math.round(1E3*Math.random()),R(dc("@"+g.tb+"keyframes "+a+" {to { "+h+" top:"+d+"; }}"),{"class":"de-css-move"}),b.Ca?(b.style.cssText=b.Ca,b.removeEventListener(g.ha,yc,n)):b.style.cssText=o,b.Ca=h+" top:"+d+";",b.addEventListener(g.ha,yc,n),g.s(b,"de-pview-anim"),b.style[g.ia]=a)}}function Pe(a,b){(z("de-pview-link",a)||{}).className="";(aa('.//a[starts-with(text(),">>") and contains(text(),"'+b+'")]',a)||{}).className="de-pview-link"}function Hb(a,b,c,e,k){clearTimeout(lb);var v;if(a){if(k=(v=
a.ownerDocument===l)?a.cloneNode(i):Ib(a),k.setAttribute("de-post",m),k.className=d.u+" de-pview"+(a.fb?" de-viewed":""),k.style.display="",d.X&&(k.firstElementChild.style.cssText="max-width: 100%; margin: 0;",w(z("doubledash",k))),k.a=b,D(k.querySelectorAll(".de-img-full, .de-ppanel"),w),v?(f.addYouTube&&(Ge(k,U("de-ytube-link",a)),Ee(k,z("de-ytube-obj",a))),f.addImgs&&D(U("de-img-pre",k),function(a){Le(a.parentNode)}),f.imgSrcBtns&&D(U("de-btn-src",k),function(a){a.setAttribute("de-id","pv"+a.getAttribute("de-id"))})):
(Cb(k),Bb(k),Db(k),Eb(k)),D(k.P=Ha(k),function(a){a.style.display=""}),f.expandImgs&&Fb(k),2===f.linksNavig&&Pe(k,c.a),gb(k),f.markViewed)k.Bc=setTimeout(function(a,b){if(!a.fb){g.s(a,"de-viewed");a.fb=i}var c=(sessionStorage["de-viewed"]||"").split(",");c.push(b);sessionStorage["de-viewed"]=c},2E3,a,b)}else k||(Pb[b]=i),k=C('<div class="'+d.u+' de-pview-info de-pview">'+(k||$b[h])+"</div>");y.appendChild(k);Oe(e,k,n);k.onmouseover=function(){db(this,n)};k.onmouseout=function(){db(pa,i)};k.Fb=i;pa&&
c.Fb?(Gb(c.aa),k.parent=c,c.aa=k):(Gb(pa),pa=k);f.animation&&(g.Y(k,function(a){g.W(a,"de-pview-anim");a.style[g.ia]=""}),g.s(k,"de-pview-anim"),k.style[g.ia]="de-post-open-"+(k.nb?"t":"b")+(k.mb?"l":"r"));return k}function Qe(a,b,c){if(!qa[a])return m;var e=qa[a][b];if(a===u||!e||e.Yb)return e;b=tb(a)+d.pa+c+(d.ea?".html":Jb);a=e.getElementsByTagName("a");for(c=a.length-1;0<=c;c--)/^>>\d+$/.test(a[c].textContent)&&(a[c].href=b);e.Yb=i;return e}function If(a){var b=a.pathname.match(d.Ac)[1],c=(a.pathname.match(/[^\/]+\/[^\d]*(\d+)/)||
[,0])[1],e=(a.textContent.match(/\d+$/)||[c])[0],k=I[e]||Qe(b,e,c),v=ba(a),o=v.Fb?v.aa:pa;if(!f.noNavigHidd||!k||!k.h)Pb[e]?Hb(m,e,v,a,$b[h]):o&&o.a===e?(db(o,n),Gb(o.aa),Oe(a,o,i),Pe(o,v.a)):k?Hb(k,e,v,a,m):(o=Hb(m,e,v,a,'<span class="de-wait">'+ra[h]+"</span>"),qa[b]=[],xa(m,b,c,i,function(k,f,h){if(!h){var g=0,j=k.length;f.p=i;f.i=f.querySelector(d.v);for(qa[b][c]=f;g<j;g++)f=k[g],f.i=f.querySelector(d.v),qa[b][d.ka(f)]=f;xc(qa[b]);o&&o.parentNode&&Hb(Qe(b,e,c),e,v,a,h)}b=e=c=v=o=m}))}function Jf(){2<
this.textContent.length&&(this.tc=setTimeout(If,f.linksOver,this))}function Kf(){clearTimeout(this.tc);db(pa,i)}function gb(a){if(f.linksNavig)for(var b=l.evaluate('.//a[starts-with(text(),">>")]',a,m,4,m);a=b.iterateNext();)a.onmouseover=Jf,a.onmouseout=Kf}function xa(a,b,c,e,k){GM_xmlhttpRequest({method:"GET",url:g.Ua(a||d.J(b,c)),onreadystatechange:function(a){if(4===a.readyState){if(200===a.status){var b=g.Ob(a.responseText);!j.form&&$&&(j=Re(l.importNode(b.querySelector(d.Ib),i)),Y($,j.form));
e?Se(b.querySelector(d.na),b,function(a){k(d.Wa(a),d.wb(a,b),m)}):k(m,b,m)}else k(m,m,0===a.status?sa[h]:"HTTP ["+a.status+"] "+a.statusText);k=e=b=m}}})}function Lf(a,b){GM_xmlhttpRequest({method:"GET",url:g.Ua(a),onreadystatechange:function(a){if(4===a.readyState)if(304===a.status)ja(p("de-alert-newposts"));else{try{b(a.status,a.statusText,JSON.parse(a.responseText))}catch(e){b(1,e.toString(),m)}b=m}}})}function Ib(a){return zc(l.importNode(a,i))}function Te(a){f.expandImgs&&Fb(a);a.h||(X[a.count]=
1,E.T(a,Kb,n));var b,c,e=[];c=a.i.getElementsByTagName("a");for(var d=c.length-1;0<=d;d--)(b=c[d].textContent.match(/^>>(\d+)$/))&&-1===e.indexOf(b=b[1])&&e.push(b);b=a.a;for(d=e.length-1;0<=d;d--)if(c=I[e[d]])c.w?-1===c.w.indexOf(b)&&c.w.push(b):c.w=[b],w(z("de-refmap",c)),Ne(c),gb(z("de-refmap",c)),f.hideRefPsts&&c.h&&Kb(a,"reference to >>"+e[d]);gb(a);Cb(a);Db(a);ab&&lc(a,m)}function Lb(a,b,c,e){var k;Ac(b,c,a,e);vc(b);f.expandPosts&&!q&&Bc(b);Te(b);Bb(b);Eb(b);hb&&0!==e?(e=hb.cloneNode(i),(k=
d.Wa(e)[0])?k.parentNode.replaceChild(b,k):e=b):e=b;a.appendChild(e);f.preLoadImgs&&window.postMessage("K"+c,"*");d.r&&!d.L&&a.appendChild(l.createElement("br"));return+!b.h}function Cc(a,b){var c=a.i.querySelector(".de-ytube-ext"),e=z("de-ytube-obj",a),k=U("de-ytube-link",a);b();d.ab&&(a.innerHTML=Dc(a.innerHTML),a.P=Ha(a));a.i=a.querySelector(d.v);c&&a.i.appendChild(c);e&&Ee(a,e);Ge(a,k);Te(a)}function Ue(a,b){var c=ba(a),e=c.a;d.j?(w(a.nextSibling),w(a.previousSibling),w(a),b?Cc(c,function(){c.i.replaceChild(c.querySelector(".alternate > div"),
c.i.firstElementChild)}):c.i.replaceChild(c.querySelector(".alternate > div"),c.i.firstElementChild),c=m):xa(m,u,c.N.a,i,function(b,v,f){f||(e===d.xa(v)?(Cc(c,function(){c.i.parentNode.replaceChild(l.importNode(v.querySelector(d.v),i),c.i)}),w(a)):(f=ta.some.call(b,function(a){return d.ka(a)===e?(Cc(c,function(){c.i.parentNode.replaceChild(l.importNode(a.querySelector(d.v),i),c.i)}),a=m,i):n}))||w(a));e=c=m})}function Bc(a){if(!a.h&&(a=a.querySelector(d.f?'p[id^="post_truncated"]':d.j?".abbrev > span":
".abbrev, .abbr, .omittedposts, .shortened"))&&/long|full comment|gek\u00fcrzt|слишком|длинн|мног|полная версия/i.test(a.textContent))1===f.expandPosts?Ue(a,n):Q("a",a).onclick=function(a){x(a);Ue(this,i)}}function eb(a,b,c){c||K(ra[h],"load-thr",i);xa(m,u,a.a,i,function(e,k,f){var o,t,j=a.N,l=e.length;if(f)K(f,"load-thr",n);else{Ea();w(p("de-select"));t=j.Hc||
j.S-Wd(j)+1;j.innerHTML="";(f=Ib(k)).p=i;Lb(j,f,d.xa(k),0);f.ra=(z(d.ob,f)||{}).textContent||na(f).substring(0,70).replace(/\s+/g," ");ea[ea.indexOf(a)]=f;g.la(f.G,'<span>&nbsp;[<a href="'+d.J(u,f.a)+'">'+Ad[h]+"</a>]</span>");1===b||b>=l?k=0:(k=l-b,j.Hc=b+1,j.appendChild(s("div",{"class":"de-omitted",text:Bd[h]+k},m)));for(o=[f];k<l;k++)Lb(j,f=Ib(e[k]),d.ka(e[k]),k+1),o.push(f);if(5<b||1===b)j.appendChild(C('<span>[<a href="#">'+Cd[h]+"</a>]</span>")).onclick=function(b){x(b);eb(a,5,m);a=m};ta.splice.apply(B,
[B.indexOf(a),t].concat(o));j.S=l+1;ja(p("de-alert-load-thr"))}ec(a);c&&c();b=c=m})}function vf(){var a=this.parentNode.parentNode,b=Q("iframe",a),c=a.getAttribute("info").split(";")[2],e=z("de-content",l);w(p("de-fav-wait"));b?(w(b),e.style.overflowY="auto"):(c=I[c])&&!c.h?ec(c):(w(p("de-iframe-fav")),z("de-content",l).style.overflowY="scroll",ga(a,[C('<iframe name="de-iframe-fav" id="de-iframe-fav" src="'+Q("a",a).href+'" scrolling="no" style="border: none; width: '+(l.body.clientWidth-55)+'px; height: 1px;" />'),
C('<div id="de-fav-wait" class="de-wait" style="font-size: 1.1em; text-align: center">'+ra[h]+"</div>")]))}function oe(a,b,c){xa(d.$(u,b),m,m,n,function(e,k){for(var f,e=l.importNode(k.querySelector(d.na),i);f=e.firstChild;)a.appendChild(f);c(zc(a),b);c=a=b=m})}function qe(a){K(ra[h],"load-pages",i);f.preLoadImgs&&D(y.querySelectorAll('a[href^="blob:"]'),function(a){window.URL.revokeObjectURL(a.href)});var b=-1,c=y,e=Array(a),d=1;y.innerHTML="";B=[];for(qa={};++b<a;)1<a&&(c=s("div",{id:"de-page"+
b},m),ga(y,[s("center",{text:b+" "+Yb[h],style:"font-size: 2em;"},m),l.createElement("hr"),c])),oe(c,b,function(b,c){e[c]=b;if(d===a){e.forEach(function(a){Ve(a);We(a)});B.forEach(vc);B.forEach(Fb);B.forEach(Bc);Cb(m);Bb(m);Db(y);Eb(y);xc(I);gb(y);Zd();f.markViewed&&ce();Xe();ab&&B.forEach(function(a){lc(a,m)});ja(p("de-alert-load-pages"));window.postMessage("Kall","*");d=e=m}else d++})}function Ec(a){q&&1===f.updThread&&(l.querySelector('a[id^="de-btn-upd"]').id="de-btn-upd-"+a)}function ge(){Ec("off");
clearInterval(xb);xb=ya}function ie(){Ta||(Ta=s("audio",{preload:"auto",src:"https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/master/signal.ogg"},m));Sa=!Sa}function Ye(){ka?jb=n:(Ta.play(),setTimeout(Ye,Ra),jb=i)}function Mb(a,b){if(a)a!==sa[h]?(K(Dd[h]+q+"): \n"+a,"newposts",n),l.title="{"+a.match(/(?:\[)(\d+)(?:\])/)[1]+"} "+l.title,ge()):(K(sa[h],"newposts",n),Ec("warn"));else if(ja(p("de-alert-newposts")),1===f.updThread&&(Ec("on"),!ka)){b+=+(l.title.match(/^\[(\d+)\]/)||[,0])[1];
f.favIcoBlink&&za&&(clearInterval(kb),0<b&&(kb=setInterval(function(){var a=l.head.querySelector('link[href="'+za+'"]')?"data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAYAAABPYyMiAAAABmJLR0T///////8JWPfcAAAACXBIWXMAAABIAAAASABGyWs+AAAAF0lEQVRIx2NgGAWjYBSMglEwCkbBSAcACBAAAeaR9cIAAAAASUVORK5CYII=":za;D(l.head.querySelectorAll('link[rel="shortcut icon"]'),w);l.head.appendChild(s("link",{href:a,rel:"shortcut icon"},m))},800)));l.title=(0<b?" ["+b+"] ":"")+Qa;if(g.m&&f.desktNotif&&0<b&&0!==
window.webkitNotifications.checkPermission()){var c=window.webkitNotifications.createNotification("/favicon.ico",Qa,Ed[h].replace(/%m/g,b));c.ondisplay=function(){setTimeout(function(){c.cancel();c=m},8E3)};c.onclick=function(){window.focus&&window.focus();this.cancel()};c.show()}Sa&&!jb&&0<b&&(Ra?Ye():Ta.play())}}function Mf(a,b){var c,e=a.src,d=a.thumb,f=a.thumb_width,o=a.thumb_height,t=a.size,h=a.rating;a:{for(var g=l.cookie.split("; "),j=g.length;j--;)if(c=g[j].split("="),c[0]===escape("de-rating")){c=
unescape(c[1]);break a}c=n}g=c||"r-15";"b"===u||"rf"===u?c=d.substring(d.lastIndexOf("/")+1):(c=e.substring(e.lastIndexOf("/")+1),17<c.length&&(c=c.substring(0,17)+"..."));d="r-18g"===h&&"r-18g"!==g?"images/r-18g.png":"r-18"===h&&("r-18g"!==g||"r-18"!==g)?"images/r-18.png":"r-15"===h&&"sfw"===g?"images/r-15.png":"illegal"===h?"images/illegal.png":a.thumb;d!==a.thumb&&(o=f=200);return C('<div class="file"><div class="fileinfo">Файл: <a href="/'+e+'" target="_blank">'+c+"</a><br><em>"+
a.thumb.substring(a.thumb.lastIndexOf(".")+1)+", "+(1024>t?t+" B":1048576>t?(t/1024).toFixed(2)+" KB":1073741824>t?(t/1048576).toFixed(2)+" MB":(t/1073741824).toFixed(2)+" GB")+", "+a.metadata.width+"x"+a.metadata.height+'</em><br><a class="edit_ icon" href="/utils/image/edit/'+a.file_id+"/"+b+'"><img title="edit" alt="edit" src="/images/blank.png" /></a></div><a href="/'+e+'" target="_blank"><img class="thumb" src="/'+d+'" width="'+f+'" height="'+o+'" /></a></div>')}function Ze(a,b){if(d.$a&&!a.nc){var c=
b.querySelector(d.$a);c&&(a.querySelector(d.$a)||a.i.appendChild(l.importNode(c,i)),a.nc=i)}}function $e(a){if(!a.ec){var b=sessionStorage["de-deleted"];sessionStorage["de-deleted"]=(b?b+",":"")+a.count;a.ec=i;g.W(a.G,"de-ppanel-cnt");g.s(a.G,"de-ppanel-del")}}function Ab(a){d.j?Lf("//dobrochan.ru/api/thread/"+u+"/"+q+"/new.json?message_html&new_format&last_post="+B[B.length-1].a,function(b,c,e){if(200!==b||e.error)Mb(0===b?sa[h]:c||e.message,0);else{var k,b=0,f=(e.result||{}).posts,o=z("de-thread",
y);if(f&&0<f.length){e=0;for(c=f.length;e<c;e++){k=f[e];var t=ya,t=k.display_id,g=k.files,j=g.length,l=s("td",{id:"reply"+t,"class":"reply","de-post":t},m);l.innerHTML='<a name="i'+t+'"></a><label><a class="delete icon"><input type="checkbox" id="delbox_'+t+'" class="delete_checkbox" value="'+k.post_id+'" id="'+t+'" /></a><span class="postername">'+k.name+"</span> "+d.kc.vb(k.date)+' </label><span class="reflink"><a onclick="Highlight(0, '+t+')" href="/'+u+"/res/"+q+".xhtml#i"+t+'">No.'+t+"</a></span><br>";
for(t=0;t<j;t++)l.appendChild(Mf(g[t],k.post_id));ga(l,[G(1<j,s("div",{style:"clear: both;"},m)),C('<div class="postbody">'+k.message_html+"</div>"),s("div",{"class":"abbrev"},m)]);k=zc(l);b+=Lb(o,k,f[e].display_id,o.S+e);B.push(k)}o.S+=f.length}Mb(m,b)}a&&a();a=m}):xa(m,u,q,i,function(b,c,e){if(e)Mb(e,0);else{var k,f,o,h,g=0,j=B.length,l=b.length,r=z("de-thread",y);Ze(B[0],c);c=1;for(k=0;c<j||k<l;c++,k++)f=B[c],(o=b[k])?(h=d.ka(o),f?f.a!==h?($e(f),k--):Ze(f,o):(g+=Lb(r,f=Ib(o),h,c),B.push(f))):$e(f);
Mb(e,g);r.S=j;Ja();p("de-panel-info").firstChild.textContent=c+"/"+Ha(y).length}a&&a();a=m})}function he(){xb=setInterval(function(){Ab(m)},1E3*f.updThrDelay)}function af(a){f.hideRefPsts&&a.w&&(a.w.forEach(function(b){var c=I[b];c&&!P[b]&&Fc(c,"reference to >>"+a.a)}),a=m)}function Gc(a){f.hideRefPsts&&a.w&&a.w.forEach(function(a){var c=I[a];c&&!P[a]&&(0!==X[c.count]&&ib(c,n,m),Gc(c))})}function Xe(){for(var a,b,c,e=B.length-1;0<=e;e--)if(c=X[e],a=B[e],P[b=a.a]){if(a.p&&(P[b][0]="undefined"===typeof Da[b]?
1:0),0===P[b][0]?Ma(a,i):(P[b][1]=Date.now(),a.G.firstChild.className="de-btn-hide-user"),"undefined"===typeof c)X[e]=1,E.T(a,function(a){X[a.count]=0},n)}else a.p&&("undefined"!==typeof Da[b]?X[e]=c="0":"0"===c&&(c=m)),"0"===c?Fc(a,m):"1"!==c&&(X[a.count]=1,E.T(a,Kb,n))}function cb(a,b){b?g.s(a,"de-post-hid"):g.W(a,"de-post-hid")}function Hc(a,b){b&&a.G.appendChild(s("a",{"class":"de-post-note de-abtn",text:" autohide: "+b+" ",href:"#"},{click:function(a){x(a);w(this)}}))}function ib(a,b,c){var e,
k,v=a.N;a.h=b;if(a.p){if(v.style.display=b?"none":"",v.h=b,e=p("de-thr-hid-"+(k=a.a)),!b&&e&&(w(e),ae(a,1)),b&&!e)e=C('<div class="'+d.u+' de-thr-hid" id="de-thr-hid-'+k+'">'+Fd[h]+' <a href="#">№'+k+"</a><i> ("+(c?"autohide: "+c:a.ra.replace(/</g,"&lt;").replace(/>/g,"&gt;"))+")</i></div>"),Y(v,e),b=Q("a",e),b.onclick=function(b){x(b);Ma(a,!a.h);Ka()},b.onmouseover=function(){v.style.display=""},e.onmouseout=function(){v.style.display="none"},ae(a,0)}else cb(a,b),f.delHiddPost?d.ya(a).style.display=
b?"none":"":((e=z("de-post-note",a))?b?c&&(e.innerText=" autohide: "+c+" "):w(e):b&&Hc(a,c),e=a.querySelector(d.Jb),e.onmouseover=b&&function(){cb(ba(this),n)},e.onmouseout=b&&function(){cb(ba(this),i)}),f.strikeHidd&&setTimeout(D,0,y.querySelectorAll('a[href*="#'+a.a+'"]'),b?function(a){a.className="de-ref-hid"}:function(a){a.className=m})}function Fc(a,b){ib(a,i,b);af(a)}function Kb(a,b){P[a.a]||(a.h?(w(z("de-post-note",a)),Hc(a,b)):(X[a.count]=0,Fc(a,b)))}function bf(a){P[a.a]||(X[a.count]=1,ib(a,
n,m),Gc(a),w(z("de-post-note",a)))}function Ma(a,b){var c=a.a;ib(a,b,m);a.G.firstChild.className="de-btn-hide-user";b?af(a):Gc(a);P[c]||(P[c]=Array(2));P[c][0]=+!b;P[c][1]=Date.now()}function cf(a){return a.replace(/\s+/g," ").replace(/[^a-zа-яё ]/ig,"").substring(0,800).split(" ")}function Nf(a){var b=na(a),c=cf(b),e=a.h,d=a.a;B.forEach(function(a){var b=d,f=e,h=c,g,j=cf(na(a)),l=j.length,p=h.length,r=p,q=p,s=0;if(!(l<0.4*r||l>3*r)){for(;p--;)if(6<r&&3>h[p].length)q--;else for(g=l;g--;)(j[g]===
h[p]||h[p].match(/>>\d+/)&&j[g].match(/>>\d+/))&&s++;s<0.4*q||l>3*q||(w(z("de-post-note",a)),f?(0!==X[a.count]&&ib(a,n,m),P[p=a.a]&&delete P[p]):(Ma(a,i),Hc(a,"similar to >>"+b)))}});Ka();e=d=c=m}function df(a){var b,c,e=a.P[0];if(e.hash)return e.hash;c=p("de-canvas")||l.body.appendChild(s("canvas",{id:"de-canvas",style:"display: none;"},m));a=c.width=e.width;b=c.height=e.height;c=c.getContext("2d");c.drawImage(e,0,0);c=c.getImageData(0,0,a||1,b||1).data;var d,f,o,h,g,j;g=a*b;var r=256/3,q=0;for(f=
d=0;d<g;d++,f+=4)c[d]=0.3*c[f]+0.59*c[f+1]+0.11*c[f+2];for(d=0;8>d;d++)for(f=0;8>f;f++){g=d/7*(b-1);o=Math.min(g|0,b-2);j=g-o;g=f/7*(a-1);h=Math.min(g|0,a-2);g-=h;q=(q<<4)+Math.min(128*((c[o*a+h]*(1-g)*(1-j)+c[o*a+h+1]*g*(1-j)+c[(o+1)*a+h+1]*g*j+c[(o+1)*a+h]*(1-g)*j)/r|0),255);if(o=q&4026531840)q^=o>>>24;q&=~o}return e.hash=q}function L(a){a?this.update():this.Ja()}function ef(a){E.T(a,Kb,a.h&&bf)}function Ic(){ja(p("de-alert-help-err-spell"));E.zb&&B.forEach(function(a){E.T(a,bf,m)})}function oc(){var a=
p("de-spell-edit"),b=a.value;if(b){if(E.ma(b)){Ic();E.cb();a.value=E.list;f.hideBySpell?B.forEach(ef):E.disable();Ja();return}}else Ic(),Ja();E.bb("");l.querySelector('input[info="hideBySpell"]').checked=n}function Pa(a,b){var c,e=p("de-spell-edit"),d=e&&e.value,f=l.querySelector('input[info="hideBySpell"]');d||(E.Lb||E.Kb(),d=E.list);if(c=E.ma(d))if(a=a+(q?"["+u+","+q+"]":"")+b,d=c[0].split(RegExp("(?:^|\\|?[\\s\\n]*)"+Wa(a)+"(?: \\|\\n|$)","g")),c=1===d.length?E.ma(a+(d[0]?" |\n"+d[0]:"")+"\n\n"+
c[1]):E.ma(d.join("")+"\n\n"+c[1])){Ic();E.cb();e&&(f.checked=!!(e.value=E.list));E.list&&(O("hideBySpell",1),B.forEach(ef));return}E.disable();e&&(f.checked=n);O("hideBySpell",0)}function ee(){return!f.scriptStyle?"fr":1===f.scriptStyle?"en":"de"}function me(){function a(a,b){e+=a+':before { content: ""; padding: 0 16px 0 0; margin: 0 4px; background: url('+b+") no-repeat center; }"}function b(a,b){e+=a+" { background: url(data:image/gif;base64,"+b+") no-repeat center !important; }"}H(y);var c,e=
"",e=e+('.de-block { display: block; }\t\t#de-content-cfg > div { float: left; border-radius: 10px 10px 0 0; width: auto; min-width: 0; padding: 0; margin: 5px 20px; overflow: hidden; }\t\t#de-cfg-info > span { display: inline-block; vertical-align: top; }\t\t#de-cfg-head { padding: 4px; border-radius: 10px 10px 0 0; color: #fff; text-align: center; font: bold 14px arial; cursor: default; }\t\t#de-cfg-head:lang(en), #de-panel:lang(en) { background: linear-gradient(to bottom, #4b90df, #3d77be 5px, #376cb0 7px, #295591 13px, rgba(0,0,0,0) 13px), linear-gradient(to bottom, rgba(0,0,0,0) 12px, #183d77 13px, #1f4485 18px, #264c90 20px, #325f9e 25px); }\t\t#de-cfg-head:lang(fr), #de-panel:lang(fr) { background: linear-gradient(to bottom, #7b849b, #616b86 2px, #3a414f 13px, rgba(0,0,0,0) 13px), linear-gradient(to bottom, rgba(0,0,0,0) 12px, #121212 13px, #1f2740 25px); }\t\t#de-cfg-head:lang(de), #de-panel:lang(de) { background: #777; }\t\t.de-cfg-body { width: 372px; min-height: 348px; padding: 11px 7px 7px; margin-top: -1px; font: 13px sans-serif; }\t\t.de-cfg-body input[type="text"] { width: auto; padding: 0px; }\t\t.de-cfg-body input[value=">"] { width: 20px; }\t\t.de-cfg-body, #de-cfg-btns { border: 1px solid #183d77; border-top: none; }\t\t.de-cfg-body:lang(de), #de-cfg-btns:lang(de) { border-color: #444; }\t\t#de-cfg-btns { padding: 7px 2px 2px; }\t\t#de-cfg-bar { height: 25px; width: 100%; display: table; background-color: #1f2740; margin: 0; padding: 0; }\t\t#de-cfg-bar:lang(en) { background-color: #325f9e; }\t\t#de-cfg-bar:lang(de) { background-color: #777; }\t\t.de-cfg-depend { padding-left: 25px; }\t\t.de-cfg-tab { padding: 4px 6px; border-radius: 4px 4px 0 0; font: bold 14px arial; text-align: center; cursor: default; }\t\t.de-cfg-tab-back { display: table-cell !important; float: none !important; min-width: 0; padding: 0 !important; box-shadow: none !important; border: 1px solid #183d77 !important; border-radius: 4px 4px 0 0; opacity: 1; }\t\t.de-cfg-tab-back:lang(de) { border-color: #444 !important; }\t\t.de-cfg-tab-back:lang(fr) { border-color: #121421 !important; }\t\t.de-cfg-tab-back[selected="true"] { border-bottom: none !important; }\t\t.de-cfg-tab-back[selected="false"] > .de-cfg-tab { background-color: rgba(0,0,0,.2); }\t\t.de-cfg-tab-back[selected="false"] > .de-cfg-tab:lang(en), .de-cfg-tab-back[selected="false"] > .de-cfg-tab:lang(fr) { background: linear-gradient(to bottom, rgba(132,132,132,.35) 0%, rgba(79,79,79,.35) 50%, rgba(40,40,40,.35) 50%, rgba(80,80,80,.35) 100%) !important; }\t\t.de-cfg-tab-back[selected="false"] > .de-cfg-tab:hover { background-color: rgba(99,99,99,.2); }\t\t.de-cfg-tab-back[selected="false"] > .de-cfg-tab:hover:lang(en), .de-cfg-tab-back[selected="false"] > .de-cfg-tab:hover:lang(fr)  { background: linear-gradient(to top, rgba(132,132,132,.35) 0%, rgba(79,79,79,.35) 50%, rgba(40,40,40,.35) 50%, rgba(80,80,80,.35) 100%) !important; }\t\t.de-cfg-tab::'+
(g.d?"-moz-":"")+"selection { background: transparent; }\t\t.de-cfg-unvis { display: none; }\t\t#de-cfg-updresult { padding: 3px 0; font-size: 1.1em; text-align: center; }\t\t#de-spell-panel { float: right; }\t\t#de-spell-panel > a { padding: 0 4px; text-align: center; }\t\t#de-spell-div { display: table; }\t\t#de-spell-div > div { display: table-cell; vertical-align: top; }\t\t#de-spell-edit { padding: 2px; width: 340px; height: 255px; border: none !important; outline: none !important; }\t\t#de-spell-rowmeter { padding: 2px 3px 0 0; margin: 2px 0; overflow: hidden; width: 2em; height: 257px; text-align: right; color: #fff; font: 12px courier new; }\t\t#de-spell-rowmeter:lang(en), #de-spell-rowmeter:lang(fr) { background-color: #616b86; }\t\t#de-spell-rowmeter:lang(de) { background-color: #777; }"),
e=e+"#de-btn-logo { margin-right: 3px; cursor: pointer; }\t\t#de-panel { height: 25px; z-index: 9999; border-radius: 15px 0 0 0; cursor: default;}\t\t#de-panel-btns { display: inline-block; padding: 0 2px; margin: 0; height: 25px; border-left: 1px solid #8fbbed; }\t\t#de-panel-btns:lang(de), #de-panel-info:lang(de) { border-color: #ccc; }\t\t#de-panel-btns:lang(fr), #de-panel-info:lang(fr) { border-color: #616b86; }\t\t#de-panel-btns > li { margin: 0 1px; padding: 0; }\t\t#de-panel-btns > li, #de-panel-btns > li > a, #de-btn-logo { display: inline-block; width: 25px; height: 25px; }\t\t#de-panel-btns:lang(en) > li, #de-panel-btns:lang(fr) > li  { transition: all 0.3s ease; }\t\t#de-panel-btns:lang(en) > li:hover, #de-panel-btns:lang(fr) > li:hover { background-color: rgba(255,255,255,.15); box-shadow: 0 0 3px rgba(143,187,237,.5); }\t\t#de-panel-btns:lang(de) > li > a { border-radius: 5px; }\t\t#de-panel-btns:lang(de) > li > a:hover { width: 21px; height: 21px; border: 2px solid #444; }\t\t#de-panel-info { display: inline-block; vertical-align: top; padding: 0 6px; height: 25px; border-left: 1px solid #8fbbed; color: #fff; font: 18px serif; }";
c="R0lGODlhGQAZAIAAAPDw8P///yH5BAEAAAEALAAAAAAZABkAQA";b("#de-btn-logo",c+"I5jI+pywEPWoIIRomz3tN6K30ixZXM+HCgtjpk1rbmTNc0erHvLOt4vvj1KqnD8FQ0HIPCpbIJtB0KADs=");b("#de-btn-settings",c+"JAjI+pa+API0Mv1Ymz3hYuiQHHFYjcOZmlM3Jkw4aeAn7R/aL6zuu5VpH8aMJaKtZR2ZBEZnMJLM5kIqnP2csUAAA7");b("#de-btn-hidden",c+"I5jI+pa+CeHmRHgmCp3rxvO3WhMnomUqIXl2UmuLJSNJ/2jed4Tad96JLBbsEXLPbhFRc8lU8HTRQAADs=");b("#de-btn-favor",c+"IzjI+py+AMjZs02ovzobzb1wDaeIkkwp3dpLEoeMbynJmzG6fYysNh3+IFWbqPb3OkKRUFADs=");b("#de-btn-refresh",
c+"JAjI+pe+AfHmRGLkuz3rzN+1HS2JWbhWlpVIXJ+roxSpr2jedOBIu0rKjxhEFgawcCqJBFZlPJIA6d0ZH01MtRCgA7");b("#de-btn-goback",c+"IrjI+pmwAMm4u02gud3lzjD4biJgbd6VVPybbua61lGqIoY98ZPcvwD4QUAAA7");b("#de-btn-gonext",c+"IrjI+pywjQonuy2iuf3lzjD4Zis0Xd6YnQyLbua61tSqJnbXcqHVLwD0QUAAA7");b("#de-btn-goup",c+"IsjI+pm+DvmDRw2ouzrbq9DmKcBpVfN4ZpyLYuCbgmaK7iydpw1OqZf+O9LgUAOw==");b("#de-btn-godown",c+"ItjI+pu+DA4ps02osznrq9DnZceIxkYILUd7bue6WhrLInLdokHq96tnI5YJoCADs=");b("#de-btn-newthr",c+"IyjI+pG+APQYMsWsuy3rzeLy2g05XcGJqqgmJiS63yTHtgLaPTY8Np4uO9gj0YbqM7bgoAOw==");
b("#de-btn-expimg",c+"I9jI+pGwDn4GPL2Wep3rxXFEFel42mBE6kcYXqFqYnVc72jTPtS/KNr5OJOJMdq4diAXWvS065NNVwseehAAA7");b("#de-btn-maskimg",c+"JQjI+pGwD3TGxtJgezrKz7DzLYRlKj4qTqmoYuysbtgk02ZCG1Rkk53gvafq+i8QiSxTozIY7IcZJOl9PNBx1de1Sdldeslq7dJ9gsUq6QnwIAOw==");d.R&&b("#de-btn-catalog",c+"I2jI+pa+DhAHyRNYpltbz7j1Rixo0aCaaJOZ2SxbIwKTMxqub6zuu32wP9WsHPcFMs0XDJ5qEAADs=");b("#de-btn-audio-off",c+"I7jI+pq+DO1psvQHOj3rxTik1dCIzmSZqfmGXIWlkiB6L2jedhPqOfCitVYolgKcUwyoQuSe3WwzV1kQIAOw==");b("#de-btn-audio-on",c+"JHjI+pq+AewJHs2WdoZLz7X11WRkEgNoHqimadOG7uAqOm+Y6atvb+D0TgfjHS6RIp8YQ1pbHRfA4n0eSTI7JqP8Wtahr0FAAAOw==");
c="Dw8P///wAAACH5BAEAAAIALAAAAAAZABkAQAJElI+pe2EBoxOTNYmr3bz7OwHiCDzQh6bq06QSCUhcZMCmNrfrzvf+XsF1MpjhCSainBg0AbKkFCJko6g0MSGyftwuowAAOw==";b("#de-btn-upd-on","R0lGODlhGQAZAJEAADL/Mv"+c);b("#de-btn-upd-off","R0lGODlhGQAZAJEAAP8yMv"+c);b("#de-btn-upd-warn","R0lGODlhGQAZAJEAAP/0Qf"+c);e+=".de-ppanel { margin-left: 4px; }\t\t.de-post-note { color: inherit; font: italic bold 12px serif; }\t\t.de-ppanel > span, .de-btn-src, .de-btn-expthr, .de-btn-sage { display: inline-block; margin: 0 4px -2px 0 !important; cursor: pointer; ";
f.postBtnsTxt?e+="color: "+getComputedStyle(Q("a",l)).getPropertyValue("color")+'; font-size:14px; }\t\t\t.de-btn-hide:after { content: "\u00d7"; }\t\t\t.de-post-hid .de-btn-hide:after { content: "+"; }\t\t\t.de-btn-hide-user:after { content: "[\u00d7]"; }\t\t\t.de-post-hid .de-btn-hide-user:after { content: "[+]"; }\t\t\t.de-btn-rep:after { content: "R"; }\t\t\t.de-btn-expthr:after { content: "E"; }\t\t\t.de-btn-fav:after { content: "F"; }\t\t\t.de-btn-fav-sel:after { content: "[F]"; }\t\t\t.de-btn-sage:after { content: "Sage!"; }\t\t\t.de-btn-src:after { content: "[Sauce]"; }':
(e+="padding: 0 14px 14px 0; }",b(".de-btn-hide-user","R0lGODlhDgAOAKIAAL//v6CgoICAgEtLS////wAAAAAAAAAAACH5BAEAAAQALAAAAAAOAA4AQAM8SLLcS2MNQGsUMYi6uB5BKI5hFgojel5YBbDDNcmvpJLkcgLq1jcuSgPmgkUmlJgFAyqNmoEBJEatxggJADs="),b(".de-post-hid .de-btn-hide-user","R0lGODlhDgAOAKIAAP+/v6CgoICAgEtLS////wAAAAAAAAAAACH5BAEAAAQALAAAAAAOAA4AQAM5SLLcS2ONCcCMIoYdRBVcN4Qkp4ULmWVV20ZTM1SYBJbqvXmA3jk8IMzlgtVYFtkoNCENIJdolJAAADs="),c="R0lGODlhDgAOAKIAAPDw8KCgoICAgEtLS////wAAAAAAAAAAACH5BAEAAAQALAAAAAAOAA4AQAM",b(".de-btn-hide",
c+"8SLLcS2MNQGsUMYi6uB5BKI5hFgojel5YBbDDNcmvpJLkcgLq1jcuSgPmgkUmlJgFAyqNmoEBJEatxggJADs="),b(".de-post-hid .de-btn-hide",c+"5SLLcS2ONCcCMIoYdRBVcN4Qkp4ULmWVV20ZTM1SYBJbqvXmA3jk8IMzlgtVYFtkoNCENIJdolJAAADs="),b(".de-btn-rep",c+"4SLLcS2MNQGsUMQRRwdLbAI5kpn1kKHUWdk3AcDFmOqKcJ5AOq0srX0QWpBAlIo3MNoDInlAZIQEAOw=="),b(".de-btn-expthr",c+"7SLLcS6MNACKLIQjKgcjCkI2DOAbYuHlnKFHWUl5dnKpfm2vd7iyUXywEk1gmnYrMlEEyUZCSdFoiJAAAOw=="),b(".de-btn-fav",c+"5SLLcS2MNQGsUl1XgRvhg+EWhQAllNG0WplLXqqIlDS7lWZvsJkm92Au2Aqg8gQFyhBxAlNCokpAAADs="),
b(".de-btn-fav-sel","R0lGODlhDgAOAKIAAP/hAKCgoICAgEtLS////wAAAAAAAAAAACH5BAEAAAQALAAAAAAOAA4AQAM5SLLcS2MNQGsUl1XgRvhg+EWhQAllNG0WplLXqqIlDS7lWZvsJkm92Au2Aqg8gQFyhBxAlNCokpAAADs="),b(".de-btn-sage","R0lGODlhDgAOAJEAAPDw8EtLS////wAAACH5BAEAAAIALAAAAAAOAA4AQAIZVI55duDvFIKy2vluoJfrD4Yi5lWRwmhCAQA7"),b(".de-btn-src",c+"9SLLcS0MMQMesUoQg6PKbtFnDaI0a53VAml2ARcVSFC0WY6ecyy+hFajnWDVssyQtB5NhTs1mYAAhWa2EBAA7"));a(".de-src-google","//google.ru/favicon.ico");a(".de-src-tineye","//tineye.com/favicon.ico");a(".de-src-iqdb",
"//iqdb.org/favicon.ico");a(".de-src-saucenao","//saucenao.com/favicon.ico");q&&(e+='.de-thread { counter-reset: i 1; }\t\t.de-ppanel-cnt:after { counter-increment: i 1; content: counter(i, decimal); vertical-align: 1px; color: #4f7942; font: italic bold 13px serif; cursor: default; }\t\t.de-ppanel-del:after { content: "'+Gd[h]+'"; color: #727579; font: italic bold 13px serif; cursor: default; }');e+="#de-txt-panel { display: block; height: 23px; font-weight: bold; cursor: pointer; }\t\t#de-txt-panel > span:empty { display: inline-block; width: 27px; height: 23px; }\t\t#de-txt-panel:lang(en) { display: none; }\t\t#de-txt-panel:lang(ru) { float: right; }";
c="R0lGODlhFwAWAJEAAPDw8GRkZAAAAP///yH5BAEAAAMALAAAAAAXABYAQAJ";b("#de-btn-bold:empty",c+"T3IKpq4YAoZgR0KqqnfzipIUikFWc6ZHBwbQtG4zyonW2Vkb2iYOo8Ps8ZLOV69gYEkU5yQ7YUzqhzmgsOLXWnlRIc9PleX06rnbJ/KITDqTLUAAAOw==");b("#de-btn-italic:empty",c+"K3IKpq4YAYxRCSmUhzTfx3z3c9iEHg6JnAJYYSFpvRlXcLNUg3srBmgr+RL0MzxILsYpGzyepfEIjR43t5kResUQmtdpKOIQpQwEAOw==");b("#de-btn-under:empty",c+"V3IKpq4YAoRARzAoV3hzoDnoJNlGSWSEHw7JrEHILiVp1NlZXtKe5XiptPrFh4NVKHh9FI5NX60WIJ6ATZoVeaVnf8xSU4r7NMRYcFk6pzYRD2TIUAAA7");b("#de-btn-strike:empty",
c+"S3IKpq4YAoRBR0qqqnVeD7IUaKHIecjCqmgbiu3jcfCbAjOfTZ0fmVnu8YIHW6lgUDkOkCo7Z8+2AmCiVqHTSgi6pZlrN3nJQ8TISO4cdyJWhAAA7");b("#de-btn-spoil:empty","R0lGODlhFwAWAJEAAPDw8GRkZP///wAAACH5BAEAAAIALAAAAAAXABYAQAJBlIKpq4YAmHwxwYtzVrprXk0LhBziGZiBx44hur4kTIGsZ99fSk+mjrMAd7XerEg7xnpLIVM5JMaiFxc14WBiBQUAOw==");b("#de-btn-code:empty",c+"O3IKpq4YAoZgR0KpqnFxokH2iFm7eGCEHw7JrgI6L2F1YotloKek6iIvJAq+WkfgQinjKVLBS45CePSXzt6RaTjHmNjpNNm9aq6p4XBgKADs=");b("#de-btn-quote:empty",c+"L3IKpq4YAYxRUSKguvRzkDkZfWFlicDCqmgYhuGjVO74zlnQlnL98uwqiHr5ODbDxHSE7Y490wxF90eUkepoysRxrMVaUJBzClaEAADs=");
g.Ga&&(e+="@keyframes de-open {\t\t\t\t0% { transform: translateY(-1500px); }\t\t\t\t40% { transform: translateY(30px); }\t\t\t\t70% { transform: translateY(-10px); }\t\t\t\t100% { transform: translateY(0); }\t\t\t}\t\t\t@keyframes de-close {\t\t\t\t0% { transform: translateY(0); }\t\t\t\t20% { transform: translateY(20px); }\t\t\t\t100% { transform: translateY(-4000px); }\t\t\t}\t\t\t@keyframes de-blink {\t\t\t\t0%, 100% { transform: translateX(0); }\t\t\t\t10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }\t\t\t\t20%, 40%, 60%, 80% { transform: translateX(10px); }\t\t\t}\t\t\t@keyframes de-cfg-open { from { transform: translate(0,50%) scaleY(0); opacity: 0; } }\t\t\t@keyframes de-cfg-close { to { transform: translate(0,50%) scaleY(0); opacity: 0; } }\t\t\t@keyframes de-post-open-tl { from { transform: translate(-50%,-50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-open-bl { from { transform: translate(-50%,50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-open-tr { from { transform: translate(50%,-50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-open-br { from { transform: translate(50%,50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-close-tl { to { transform: translate(-50%,-50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-close-bl { to { transform: translate(-50%,50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-close-tr { to { transform: translate(50%,-50%) scale(0); opacity: 0; } }\t\t\t@keyframes de-post-close-br { to { transform: translate(50%,50%) scale(0); opacity: 0; } }\t\t\t.de-pview-anim { animation-duration: .2s; animation-timing-function: ease-in-out; animation-fill-mode: both; }\t\t\t.de-open { animation: de-open .7s ease-out both; }\t\t\t.de-close { animation: de-close .7s ease-in both; }\t\t\t.de-blink { animation: de-blink .7s ease-in-out both; }\t\t\t.de-cfg-open { animation: de-cfg-open .2s ease-out backwards; }\t\t\t.de-cfg-close { animation: de-cfg-close .2s ease-in both; }");
a(".de-ytube-link","//youtube.com/favicon.ico");e+=".de-img-pre, .de-img-full { display: block; margin: "+(d.f?0:"2px 10px")+"; border: none; outline: none; cursor: pointer; }\t\t.de-img-full { float: left; }\t\t.de-img-center { position: fixed; z-index: 9999; border: 1px solid black; }\t\t.de-mp3, .de-ytube-obj { margin: 5px 20px; }\t\ttd > a + .de-ytube-obj { display: inline-block; }";a(".de-wait","data:image/gif;base64,R0lGODlhEAAQALMMAKqooJGOhp2bk7e1rZ2bkre1rJCPhqqon8PBudDOxXd1bISCef///wAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFAAAMACwAAAAAEAAQAAAET5DJyYyhmAZ7sxQEs1nMsmACGJKmSaVEOLXnK1PuBADepCiMg/DQ+/2GRI8RKOxJfpTCIJNIYArS6aRajWYZCASDa41Ow+Fx2YMWOyfpTAQAIfkEBQAADAAsAAAAABAAEAAABE6QyckEoZgKe7MEQMUxhoEd6FFdQWlOqTq15SlT9VQM3rQsjMKO5/n9hANixgjc9SQ/CgKRUSgw0ynFapVmGYkEg3v1gsPibg8tfk7CnggAIfkEBQAADAAsAAAAABAAEAAABE2QycnOoZjaA/IsRWV1goCBoMiUJTW8A0XMBPZmM4Ug3hQEjN2uZygahDyP0RBMEpmTRCKzWGCkUkq1SsFOFQrG1tr9gsPc3jnco4A9EQAh+QQFAAAMACwAAAAAEAAQAAAETpDJyUqhmFqbJ0LMIA7McWDfF5LmAVApOLUvLFMmlSTdJAiM3a73+wl5HYKSEET2lBSFIhMIYKRSimFriGIZiwWD2/WCw+Jt7xxeU9qZCAAh+QQFAAAMACwAAAAAEAAQAAAETZDJyRCimFqbZ0rVxgwF9n3hSJbeSQ2rCWIkpSjddBzMfee7nQ/XCfJ+OQYAQFksMgQBxumkEKLSCfVpMDCugqyW2w18xZmuwZycdDsRACH5BAUAAAwALAAAAAAQABAAAARNkMnJUqKYWpunUtXGIAj2feFIlt5JrWybkdSydNNQMLaND7pC79YBFnY+HENHMRgyhwPGaQhQotGm00oQMLBSLYPQ9QIASrLAq5x0OxEAIfkEBQAADAAsAAAAABAAEAAABE2QycmUopham+da1cYkCfZ94UiW3kmtbJuRlGF0E4Iwto3rut6tA9wFAjiJjkIgZAYDTLNJgUIpgqyAcTgwCuACJssAdL3gpLmbpLAzEQA7");
e+=".de-abtn { text-decoration: none !important; outline: none; }\t\t#de-alert { position: fixed; right: 0; top: 0; z-index: 9999; font: 14px arial; cursor: default; }\t\t#de-alert > div { float: right; clear: both; width: auto; min-width: 0pt; padding: 10px; margin: 1px; border: 1px solid grey; white-space: pre-wrap; }\t\t.de-alert-btn { display: inline-block; vertical-align: top; font-size: 150%; color: green; cursor: pointer; }\t\t.de-alert-msg { display: inline-block; margin-top: .25em; }\t\t.de-content { text-align: left; }\t\t.de-content textarea { display: block; margin: 2px 0; font: 12px courier new; "+
(g.e?"":"resize: none !important; ")+'}\t\t.de-content-block > a { color: inherit; font-weight: bold; }\t\t#de-content-fav, #de-content-hid { font-size: 16px; padding: 10px; border: 1px solid gray; }\t\t.de-entry { margin: 2px 0; }\t\t.de-entry > :first-child { float: none !important; }\t\t.de-entry > div > a { text-decoration: none; }\t\t.de-fav-inf-posts, .de-fav-inf-page { float: right; margin-right: 5px; font: bold 16px serif; }\t\t.de-fav-inf-old { color: #4f7942; }\t\t.de-fav-inf-new { color: blue; }\t\t.de-fav-title { margin-right: 15px; }\t\t.de-omitted { color: grey; font-style: italic; }\t\t.de-ref-hid { text-decoration: line-through !important; }\t\t.de-refmap { margin: 10px 4px 4px 4px; font-size: 70%; font-style: italic; }\t\t.de-refmap:before { content: "'+
Hd[h]+' "; }\t\t.de-refmap > a { text-decoration: none; }\t\t#de-sagebtn { margin-right: 7px; cursor: pointer; }\t\t#de-select { padding: 0 !important; margin: 0 !important; width: auto; min-width: 0; z-index: 9999; border: 1px solid grey;}\t\t#de-select a { display: block; padding: 3px 10px; color: inherit; text-decoration: none; font: 13px arial; white-space: nowrap; }\t\t#de-select a:hover { background-color: #222; color: #fff; }\t\t.de-selected { '+(g.e?"border-left: 4px solid red; border-right: 4px solid red; }":
"box-shadow: 6px 0 2px -2px red, -6px 0 2px -2px red; }")+'\t\t#de-txt-resizer { display: inline-block !important; float: none !important; padding: 6px; margin: -2px -12px; vertical-align: bottom; border-bottom: 2px solid #555; border-right: 2px solid #444; cursor: se-resize; }\t\t.de-viewed { color: #888 !important; }\t\t.de-pview { position: absolute; width: auto; min-width: 0; z-index: 9999; border: 1px solid grey; margin: 0 !important; display: block !important; }\t\t.de-pview-info { padding: 3px 6px !important; }\t\t.de-pview-link { font-weight: bold; }\t\t.de-archive:after { content: ""; padding: 0 16px 3px 0; margin: 0 4px; background: url(data:image/gif;base64,R0lGODlhEAAQALMAAF82SsxdwQMEP6+zzRA872NmZQesBylPHYBBHP///wAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAkALAAAAAAQABAAQARTMMlJaxqjiL2L51sGjCOCkGiBGWyLtC0KmPIoqUOg78i+ZwOCUOgpDIW3g3KJWC4t0ElBRqtdMr6AKRsA1qYy3JGgMR4xGpAAoRYkVDDWKx6NRgAAOw==) no-repeat center; }\t\t#de-iframe-pform, #de-iframe-dform, small[id^="rfmap"], div[id^="preview"], div[id^="pstprev"], body > hr, .theader, .postarea { display: none !important; }';
d.H?e+="#newposts_get, .extrabtns, .ui-resizable-handle, .replymode, blockquote + a { display: none !important; }\t\t\t.ui-wrapper { display: inline-block; width: auto !important; height: auto !important; padding: 0 !important; }":d.L&&(e+='#de-pform > div, .mentioned, form > div[style="text-align: center;"], form > div[style="text-align: center;"] + hr { display: none !important; }');d.f?e+='.de-post-hid > div:not(.postheader), img[id^="translate_button"], img[src$="button-expand.gif"], img[src$="button-close.gif"], body > center > hr, h2, form > div:first-of-type > hr { display: none !important; }\t\t\tdiv[id^="Wz"] { z-index: 10000 !important; }\t\t\t.de-thr-hid { margin-bottom: '+
(!q?"7":"2")+"px; }\t\t\t.file_reply + .de-ytube-obj, .file_thread + .de-ytube-obj { margin: 5px 20px 5px 5px; float: left; }\t\t\t.de-ytube-obj + div { clear: left; }":d.b?e+=".de-spoiler { color: #000; background-color: #000; }\t\t\t.de-post-hid > .file, .de-post-hid > blockquote, #mpostform, .navLinks, .postingMode { display: none !important; }":d.r?e+="form, form table { margin: 0; }\t\t\t.de-post-hid > .intro ~ *, .post-hover, div.banner { display: none !important; }":d.n?e+=".de-post-hid > .replyheader ~ *, .opqrbtn, .qrbtn, .ignorebtn, .hidethread, noscript, #content > hr { display: none !important; }\t\t\t.de-thr-hid { margin: 1em 0; }":
(e+=".de-post-hid > .de-ppanel ~ * { display: none !important; }",d.D?e+=".ABU_refmap, .postpanel, #CommentToolbar, #usrFlds + tbody > tr:first-child, #postform > div:nth-child(2), #BottomNormalReply, body > center { display: none !important; }\t\t\t\t#de-txt-panel { font-size: 16px !important; }\t\t\t\t.de-abtn { transition: none; }":d.R?e+="#postform nobr, .replieslist, #captcha_status, .postnode + a, .postblock + td > small, .content-background > hr { display: none !important; }\t\t\t\t.ui-wrapper { position: static !important; margin: 0 !important; overflow: visible !important; }\t\t\t\t.ui-resizable { display: inline !important; }\t\t\t\tform textarea { resize: both !important; }":
d.j?e+="#hideinfotd, .reply_, .delete > img, .popup { display: none; }\t\t\t\t.delete { background: none; }\t\t\t\t.delete_checkbox { position: static !important; }\t\t\t\t.file + .de-ytube-obj { float: left; margin: 5px 20px 5px 5px; }\t\t\t\t.de-ytube-obj + div { clear: left; }":d.X?e+=".reply { background-color: "+getComputedStyle(l.body).getPropertyValue("background-color")+"; }":d.k?e+="span { font-size: inherit; }\t\t\t\t.de-content, .de-cfg-body { font-family: arial; }\t\t\t\t.ftbl { width: auto; margin: 0; }\t\t\t\t.reply { background: #f0e0d6; }":
d.F?e+=".de-ppanel { float: left; margin-top: 0.45em; }\t\t\t\ta + .threadlinktext { position: relative; top: 17px; }\t\t\t\t.postthreadlinks, .pagethreadlinks, .pwpostblock { display: none; }\t\t\t\t.de-btn-src { padding: 0px 10px 10px 0px !important; background-size: cover !important; }":d.Fa?e+="br.clear { display: none !important; }":d.Gb?e+="#bodywrap3 > hr, .blotter { display: none !important; }":d.ea&&(e+='span[id$="_display"] { display: none; }'));16>g.d&&(e=e.replace(/(transition|keyframes|transform|animation|linear-gradient)/g,
g.tb+"$1"),g.e||(e=e.replace(/\(to bottom/g,"(top").replace(/\(to top/g,"(bottom")));R(dc(e),{id:"de-css"});R(dc(""),{id:"de-css-dynamic"});e=b=a=m;ha();H(y)}function ha(){var a;a=f.attachPanel?".de-content { position: fixed; right: 0; bottom: 25px; z-index: 9999; max-height: 95%; overflow-x: visible; overflow-y: auto; }\t\t#de-panel { position: fixed; right: 0; bottom: 0; }":".de-content { clear: both; float: left; }\t\t#de-panel { float: right; clear: both; }";a=3===f.addPostForm?a+"#de-qarea { position: fixed; right: 0; bottom: 25px; z-index: 9990; padding: 3px; border: 1px solid gray; }\t\t\t#de-qarea-target { font-weight: bold; }\t\t\t#de-qarea-close { float: right; color: green; font: bold 20px arial; cursor: pointer; }":
a+"#de-qarea { float: none; clear: left; width: 100%; padding: 3px 0 3px 3px; margin: 2px 0; }";f.panelCounter||(a+="#de-panel-info { display: none; }");f.expandPanel||(a+="#de-panel-btns, #de-panel-info { display: none; }");f.maskImgs&&(a+='.de-img-pre, .de-ytube-obj, img[src*="spoiler"], img[src*="thumb"], img[src^="blob"] { opacity: 0.07 !important; }\t\t\t.de-img-pre:hover, .de-ytube-obj:hover, img[src*="spoiler"]:hover, img[src*="thumb"]:hover, img[src^="blob"]:hover { opacity: 1 !important; }');
f.delHiddPost&&(a+=".de-thr-hid, .de-thr-hid + div + br, .de-thr-hid + div + br + hr { display: none; }");f.noPostNames&&(a+=".commentpostername, .postername, .postertrip { display: none; }");f.noSpoilers&&(a+=".spoiler, .de-spoiler { background: #888 !important; color: #ccc !important; }");f.noPostScrl&&(a+="blockquote, blockquote > p, .code_part { max-height: 100% !important; overflow: visible !important; }");f.noBoardRule&&(a+=(d.k?".chui":".rules, #rules, #rules_row")+" { display: none; }");d.D&&
f.addYouTube&&(a+='div[id^="post_video"] { display: none !important; }');p("de-css-dynamic").textContent=a}function le(a,b){var c=f.scrUpdIntrv;if(!a){switch(c){case 0:c=1728E5;break;case 1:c=3456E5;break;case 2:c=12096E5;break;case 3:c=24192E5;break;default:c=5184E6}if(Date.now()-+f.lastScrUpd<c)return}GM_xmlhttpRequest({method:"GET",url:"https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/master/Dollchan_Extension_Tools.meta.js",headers:{"Content-Type":"text/plain"},onreadystatechange:function(c){if(4===
c.readyState)if(200===c.status){var c=c.responseText.match(/@version\s+([0-9.]+)/)[1].split("."),d=f.version.split("."),g=d.length>c.length?d.length:c.length,o=0,j=n;if(c){for(O("lastScrUpd",Date.now());o<g;){if((+c[o]||0)>(+d[o]||0)){j=i;break}else if((+c[o]||0)<(+d[o]||0))break;o++}j?b('<a style="color: blue; font-weight: bold;" href="https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/master/Dollchan_Extension_Tools.user.js">'+Id[h]+"</a>"):a&&b(Jd[h])}else a&&b('<div style="color: red; font-weigth: bold;">'+
sa[h]+"</div>")}else a&&b('<div style="color: red; font-weigth: bold;">'+sa[h]+"</div>")}})}function Of(){if(/^(?:about|chrome|opera|res)/i.test(window.location))return n;if(!window.localStorage||!("object"===typeof localStorage&&window.sessionStorage))return GM_log("WEBSTORAGE ERROR: please, enable webstorage!"),n;Pf();switch(window.name){case "de-iframe-pform":case "de-iframe-dform":return rb(('window.top.postMessage("J'+window.name+"$#$"+ye(l)+"$#$"+Ae(l,i)+'", "*");').replace(/\n|\r/g,"\\n")),
n;case "de-iframe-fav":var a=setInterval(function(){w(p("de-fav-script"));R(rb('window.top.postMessage("I'+(l.body.offsetHeight+5)+'", "*");'),{id:"de-fav-script"})},1500);S(window,{load:function(){setTimeout(function(){clearInterval(a);a=m},3E4)}});bb=i;j={}}if(d.j&&"/settings"===window.location.pathname)return S(l.querySelector('input[type="button"]'),{click:function(){l.cookie=escape("de-rating")+"="+escape(p("rating").value)+";expires="+(new Date(Date.now()+1E12)).toGMTString()+";path=/"}}),n;
if(!y||p("de-panel"))return n;Qf();return-1!==(Ca("DESU_Exclude")||"").indexOf(d.c)?n:i}function Qf(){var a=window.navigator.userAgent;g={d:+(a.match(/mozilla.*? rv:(\d+)/i)||[,0])[1],e:window.opera?+window.opera.version():0,m:+(a.match(/WebKit\/([\d.]+)/i)||[,0])[1]};g.ta=g.m&&!/chrome/i.test(a);g.Aa=!!g.d&&"function"===typeof GM_setValue;g.Ba=g.Aa||!!Fa;g.tb=g.m?"-webkit-":g.e?12.5>g.e?"-o-":"":16>g.d?"-moz-":"";if(!g.e||12<=g.e)g.Ga=i,g.ia=g.m?"webkitAnimationName":g.e?"OAnimationName":16>g.d?
"MozAnimationName":"animationName",g.ha=g.m?"webkitAnimationEnd":g.e&&12.5>g.e?"oAnimationEnd":"animationend",g.Y=function(a,c){a.addEventListener(g.ha,function k(){this.removeEventListener(g.ha,k,n);c(this);c=m},n)};g.ba=15>g.d&&536.1>g.m;g.la=g.d&&8>g.d?function(a,c){M(a,C(c))}:function(a,c){a.insertAdjacentHTML("afterend",c)};g.Ya=g.d&&8>g.d?function(a,c){Y(a,C(c))}:function(a,c){a.insertAdjacentHTML("beforebegin",c)};g.forEach=g.m||g.d?function(a,c){Object.keys(a).forEach(c,a)}:function(a,c){for(var e in a)a.hasOwnProperty(e)&&
c.call(a,e)};g.Ua=g.ta?function(a){return"/"===a[1]?"http:"+a:"/"===a[0]?"http://"+d.host+a:a}:function(a){return a};g.m&&(window.URL=window.webkitURL);g.s=g.e&&11.5>g.e?function(a,c){a.className=a.className+(" "+c)}:function(a,c){a.classList.add(c)};g.W=g.e&&11.5>g.e?function(a,c){a.className=a.className.replace(RegExp("(?:^| )"+Wa(c)+"(?= |$)","g"),"")}:function(a,c){a.classList.remove(c)};g.Ob=12<=g.d?function(a){return(new DOMParser).parseFromString(a,"text/html")}:function(a){var c=l.implementation.createHTMLDocument("");
c.documentElement.innerHTML=a;return c}}function Re(a){if(!a||d.D&&z("locked",a))return{};var b=d.X?"li":"tr",c=".//"+b+'[not(contains(@style,"none"))]//input[not(@type="hidden") and ',e=a.querySelector("#recaptcha_response_field");return{K:n,vc:!d.r||!!q,M:q,form:a,da:e,l:a.querySelector('input[name*="aptcha"]:not([name="recaptcha_challenge_field"])')||e,g:a.querySelector(b+':not([style*="none"]) textarea:not([style*="display:none"])'),qa:a.querySelector(b+' input[type="submit"]'),file:a.querySelector(b+
' input[type="file"]'),V:!d.R&&a.querySelector(b+' input[type="password"]'),gc:y.querySelector('input[type="password"]'),za:aa('.//tr[@id="trgetback"]|.//input[@type="radio" or @name="gotothread"]/ancestor::tr[1]',a),name:aa(c+'(@name="field1" or @name="name" or @name="internal_n" or @name="nya1" or @name="akane")]',a),Q:aa(c+(d.fa?'@name="sage"]':'(@name="field2" or @name="em" or @name="sage" or @name="email" or @name="nabiki" or @name="dont_bump")]'),a),sa:a.querySelector(b+' input[name="video"], '+
b+' input[name="embed"]'),U:d.X?function(a){return aa("ancestor::li[1]",a)}:function(a){return aa("ancestor::tr[1]",a)}}}function Pf(){var a=window.location.hostname.match(/(?:(?:[^.]+\.)(?=org\.|net\.|com\.))?[^.]+\.[^.]+$|^\d+\.\d+\.\d+\.\d+$|localhost/)[0];switch(a){case "4chan.org":d.b=i;break;case "krautchan.net":d.f=i;break;case "britfa.gs":d.F=i;break;case "420chan.org":d.n=i;break;default:d.j=!!l.querySelector('script[src*="hanabira"]'),d.k=!!l.querySelector('form[action*="futaba.php"]'),
d.r=!!l.querySelector('form[name*="postcontrols"]')}d.na=d.F?".threadz":d.j||d.f?'form[action*="delete"]':d.r?'form[name="postcontrols"]':d.k?"form:not([enctype])":'#delform, form[name="delform"]';d.xa=d.b||d.f||d.k||d.r?function(a){return a.querySelector('input[type="checkbox"]').name.match(/\d+/)[0]}:d.j||d.F?function(a){return a.querySelector("a[name]").name.match(/\d+/)[0]}:d.n?function(a){return a.querySelector("a[id]").id.match(/\d+/)[0]}:function(a){return a.querySelector('input[type="checkbox"]').value};
if(y=l.querySelector(d.na)){d.H=!!l.querySelector('script[src*="kusaba"]');d.host=window.location.hostname;switch(d.c=a){case "0-chan.ru":case "0chan.ru":d.R=d.H=i;break;case "2--ch.ru":d.ea=i;break;case "410chan.ru":d.fa=i;break;case "hiddenchan.i2p":d.Ab=i;break;case "dfwk.ru":d.ub=i;break;case "7chan.org":d.X=i;break;case "ponychan.net":d.Gb=i;break;case "mlpg.co":d.L=i;break;case "ernstchan.com":case "ernstchan.net":d.ja=i;break;default:d.D=!!p("ABU_css"),d.Fa=!!l.querySelector('form[action*="imgboard.php?delete"]')}hf();
d.Ec=d.j||d.R||d.Fa||d.ea||"02ch.net"===a;d.u=d.f?"postreply":d.r||d.b?"post reply":"reply";d.bc=d.H?"postnode":d.b||d.L?"op":"oppost";d.yc=d.f?".thread_body":d.n?'[id*="thread"]':!d.ja&&l.querySelector(".thread")?".thread":l.querySelector('div[id*="_info"][style*="float"]')?'div[id^="t"]:not([style])':'[id^="thread"]'+(d.X?":not(#thread_controls)":"");d.Jb=d.b?".postInfo > .postNum":d.r?".intro > .post_no + a":d.f?".postnumber":d.k?'.del, font[color="#117743"]':".reflink";d.v=d.j?".postbody":d.r?
".body":d.X?".message":"blockquote";d.Z=d.b?"fileText":d.f||d.r||d.j||d.F?"fileinfo":"filesize";d.Hb=d.F?".fileinfo":d.f?".filename > a":(d.k?"":"."+d.Z)+' a[href$=".jpg"],'+(d.k?"":"."+d.Z)+' a[href$=".png"],'+(d.k?"":"."+d.Z)+' a[href$=".gif"]';d.Ib=d.k?"form:nth-of-type(1)":d.b||d.r?'form[name="post"]':"#postform";d.ob=d.f?"postsubject":d.r||d.b?"subject":d.j?"replytitle":"filetitle";d.xc=d.k?'font[color="#707070"]':d.f?".omittedinfo":d.j?".abbrev":d.b?".summary.desktop":".omittedposts";d.$a=d.f?
".ban_mark":d.b?'strong[style="color: red;"]':n;d.wc=(d.b?".deleteform.desktop > ":"")+'input[type="submit"]';d.pa=d.f?"thread-":d.ja?"faden/":"res/";d.Ac=RegExp("^\\/?(.*?)\\/?(?:"+Wa(d.pa)+"|index|\\d+|$)");d.zc=RegExp(">https?:\\/\\/[^\\/]*"+d.c+"\\/([a-z0-9]+)\\/"+Wa(d.pa)+"(\\d+)(?:[^#<]+)?(?:#i?(\\d+))?<","g");d.J=function(a,c){return tb(a)+(d.k?"futaba.php?res="+c:d.pa+c+(d.ea?".html":Jb))};d.$=function(a,c){return tb(a)+(0<c?d.ja?"wakaba.pl?task=show&page="+c:c+Jb:d.k?"futaba.htm":d.j?"index.xhtml":
"")};d.xb=d.j?function(a){a.previousElementSibling||(a=a.parentNode);return a.parentNode}:d.f?function(a){return a.parentNode}:ba;d.Wa=d.k?function(a){return a.querySelectorAll("td:nth-child(2)")}:d.r||d.b?function(a){return U("reply",a)}:function(a){return U(d.u,a)};d.wb=d.F?function(a,c){var e,d=R(c.createElement("div"),{style:"clear: left;"}),f=z("originalpost",a);for(M(z("postmenu",f),d);"TABLE"!==(e=a.firstChild).tagName;)M(d,e),d=e;d=c.createElement("div");for(Y(a.firstChild,d);e=f.firstChild;)d.appendChild(e);
w(Q("table",a));return d}:function(a,c){var e,k,f;if(k=z(d.bc,a))return k;k=c.createElement("div");for(f=a.querySelector(d.Da+', div[id^="repl"]');(e=a.firstChild)!==f;)k.appendChild(e);a.childElementCount?Y(a.firstChild,k):a.appendChild(k);return k};d.ka=d.k?function(a){return Q("input",a).name}:function(a){return a.id.match(/\d+/)[0]};d.jc=d.b?function(a){return!!z("id_Heaven",a)}:d.f?function(a){return!!z("sage",a)}:d.fa?function(a){return!!aa('.//span[@class="filetitle" and contains(text(),"'+
unescape("%u21E9")+'")]',a)}:d.R?function(a){return!!a.querySelector('a[href="mailto:sage"], a[href^="http://cloudflare.com"]')}:function(a){return(a=a.querySelector('a[href^="mailto:"], a[href="sage"]'))&&/sage/i.test(a.href)}}}function Ac(a,b,c,e){a.N=c;a.count=e;a.i=a.querySelector(d.v);a.P=Ha(a);a.Nb=d.jc(a);a.setAttribute("de-post",b);I[a.a=b]=a}function Se(a,b,c){var e,k,f=n,o=a.querySelectorAll(d.yc);if(2>B.length&&(d.Da=d.b||d.L?".replyContainer":d.F?'div[id^="replies"] > table':d.ea?"table:not(.postfiles)":
d.k||a.querySelector("td."+d.u)?"form > table, div > table":n,d.ya=d.b||d.L?function(a){return a.parentNode}:d.Da?function(a){return a.p?a:aa("ancestor::table[1]",a)}:function(a){return a},d.Da&&(hb=a.querySelector(d.Da))&&b!==l))hb=l.importNode(hb,i);if(0===o.length)for(e=Q("hr",a).parentNode.firstChild;;){for(o=b.createElement("div");e&&(k=e.nextSibling)&&"HR"!==k.tagName;)o.appendChild(e),e=k;f?M(f,o):Y(a.firstChild,o);if(!e||!k)return;o.childElementCount&&c(o);f=k;e=k.nextSibling}D(o,c)}function Ve(a){try{D(a.getElementsByTagName("script"),
w),Se(a,l,function(a){if(d.n||d.r)M(a,a.lastChild),w(z("clear",a));var b,k=d.wb(a,l),f=ta.slice.call(d.Wa(a)),o=f.length;Ac(k,a.a=d.xa(k),a,0);k.p=i;k.ra=(z(d.ob,k)||{}).textContent||na(k).substring(0,70);for(b=0;b<o;b++)Ac(f[b],d.ka(f[b]),a,b+1);B.push(k);ea.push(k);B=B.concat(f);g.s(a,"de-thread");a.S=o+Wd(a)})}catch(b){return GM_log("DELFORM ERROR:\n"+(g.m?b.stack:b.name+": "+b.message+"\n"+(g.d?b.stack.replace(/^([^@]*).*\/(.+)$/gm,function(a,b,d){return"    at "+(b?b+" ("+d+")":d)}):b.stack))),
n}a.removeAttribute("id");return i}function Dc(a){Nb&&(a=Nb.mc(a).vb(a,m));if(d.b||d.f)a=a.replace(/(^|>|\s|&gt;)(https*:\/\/.*?)(?=$|<|\s)/ig,'$1<a href="$2">$2</a>');d.b&&f.noSpoilers&&(a=a.replace(/"spoiler">/g,'"de-spoiler">'));E.Xa&&(a=E.replace(a));f.crossLinks&&(a=a.replace(d.zc,function(a,c,e,d){return">&gt;&gt;/"+c+"/"+(d||e)+"<"}));return a}function zc(a){d.ab&&(a.innerHTML=Dc(a.innerHTML));return a}function Rf(){H(l.body);var a=y.outerHTML||(new XMLSerializer).serializeToString(y);bb?(g.Ya(l.body.firstElementChild,
a),y=l.body.firstElementChild,S(window,{load:function(){for(;y.nextSibling;)w(y.nextSibling);H(l.body)}})):(g.Ya(y,Dc(a)),y.style.display="none",y.id="de-dform-old",y=y.previousSibling,H(l.body),S(window,{load:function(){w(p("de-dform-old"))}}))}function We(a){if(d.D){var b;if(q&&(a=z("de-thread",a).nextSibling)){for(;b=a.nextSibling;)w(a),a=b;g.la(a,"<hr />")}a=p("title").firstChild;a.textContent=a.textContent.replace(/\s[^\s]+/,"Двачёк")}else if(d.F)for(var a=U("reflink",
a),c=a.length-1;0<=c;c--)b=a[c].firstChild,b.onclick=m,b.href=d.J(u,b.textContent),b.target="_blank"}function ff(){ka=i;f.favIcoBlink&&za&&(clearInterval(kb),D(l.head.querySelectorAll('link[rel="shortcut icon"]'),w),l.head.appendChild(s("link",{href:za,rel:"shortcut icon"},m)));1===f.updThread&&setTimeout(function(){l.title=Qa},200)}function Sf(){j=Re(l.querySelector(d.Ib));$=l.querySelector('form[name="oeform"], form[action*="paint"]');q?(f.rePageTitle?(Qa="/"+u+" - "+I[q].ra,l.title=Qa):Qa=l.title,
1===f.updThread&&(10<g.d||g.m?(l.addEventListener((g.m?"webkit":"moz")+"visibilitychange",function(){l.oc||l.Ic?ka=n:ff()},n),ka=!(l.oc||l.Ic)):(window.onblur=function(){ka=n},window.onfocus=ff,ka=n,S(window,{mousemove:function b(){ka=i;bc(window,{mousemove:b})}})),he()),2===f.updThread&&M(z("de-thread",l),S(C('<span>[<a href="#">'+Kd[h]+"</a>]</span>"),{click:function(b){x(b);K(ra[h],"newposts",i);Ab(m)}}))):setTimeout(window.scrollTo,20,0,0);f.updScript&&le(n,function(b){K(b,"updavail",n)})}function gf(){var a=
gc=Date.now();if(Of()){cc=l.createElement("div");var b=(window.location.pathname||"").match(RegExp("^(?:\\/?([^\\.]*?)\\/?)?("+Wa(d.pa)+")?(\\d+|index|wakaba|futaba)?(\\.(?:[a-z]+))?$"));u=b[1]||(d.ub?"df":"");q=b[2]?b[3]:d.k?(window.location.search.match(/\d+/)||[n])[0]:n;$a=b[3]&&!q?+(d.ja?(window.location.search.match(/\d+/)||[0])[0]:b[3])||0:0;Jb=d.b||d.ja?"":d.k?".htm":d.n?".php":b[4]||".html";za=(l.querySelector('head link[rel="shortcut icon"]')||{}).href;N("initBoard");f=ic("DESU_Config_"+
d.c)||Yd(g.Ba);f.version=Ia.version;g.ba&&(f.preLoadImgs=0);if((g.ba||g.ta)&&2===f.ajaxReply)f.ajaxReply=1;g.Ga||(f.animations=0);if(d.b||d.D)f.findRarJPEG=0;g.d||(Ia.favIcoBlink=0);g.m?f.favIcoBlink=0:f.desktNotif=0;g.e&&(11.6>g.e&&2>f.scriptStyle&&(f.scriptStyle=2),12>g.e&&(f.YTubeTitles=0),2===f.YTubeType&&(f.YTubeType=1),f.updScript=0);f.saveSage||(f.sageReply=0);f.passwValue||(f.passwValue=Math.round(1E15*Math.random()).toString(32));J("DESU_Config_"+d.c,JSON.stringify(f));h=f.language;da=ub("DESU_Stat_"+
d.c,{view:0,op:0,reply:0});q&&(da.view=+da.view+1);J("DESU_Stat_"+d.c,JSON.stringify(da));f.correctTime&&(Nb=new va(f.timePattern,f.timeOffset,h,sessionStorage.timeRPattern,sessionStorage.timeRPHash));d.j&&(d.kc=new va("yyyy-nn-dd-hh-ii-ss",f.timeOffset||0,f.correctTime?h:1,"1_d _m _y (_w) _h:_i ",152203056));E=new L(!!f.hideBySpell);d.ab=d.b||d.f||Nb||E.Xa||f.crossLinks;N("readCfg");if(d.ab||bb)Rf(),N("replaceDelform");Ve(y)&&(N("parseDelform"),jc(),N("readFavorites"),f.keybNavig&&(zf(),N("initKeyNavig")),
We(y),bb||(Sf(),N("initPage"),de(),N("addPanel"),b=r("div",{id:"de-parea",style:"text-align: center;"},[r("div",{id:"de-togglereply",style:"display: none;"},[W("["),s("a",{text:pd[h],href:"#","class":"de-abtn"},{click:fe}),W("]")]),r("div",{id:"de-pform"},[j.form,$]),l.createElement("hr")]),q&&1===f.addPostForm?M(d.b?Q("hr",y):y,b):Y(y,b),(q&&1<f.addPostForm||!q&&f.noThrdForm)&&H(b),g.la(b,'<div id="de-qarea" class="'+d.u+'" style="display: none;"></div>'),3===f.addPostForm&&ga(p("de-qarea"),[C('<span id="de-qarea-target">'+
qd[h]+' <a class="de-abtn"></a></span>'),s("span",{id:"de-qarea-close",text:"\u00d7"},{click:Ea})]),d.ea&&(D(y.querySelectorAll('input[type="hidden"]'),w),y.appendChild(z("userdelete",l.body))),j.form?ve(m,m,m):$&&xa(m,u,B[0].a,n,ve),N("initPostform")),Df(),f.preLoadImgs&&window.postMessage("Kall","*"),B.forEach(vc),Za(JSON.stringify(F)),N("addPostButtons"),f.expandImgs&&(B.forEach(Fb),N("eventPostImg")),f.expandPosts&&!q&&(B.forEach(Bc),N("expandPost")),f.addMP3&&(Cb(m),N("addLinkMP3")),f.addYouTube&&
(Bb(m),N("addLinksTube")),f.addImgs&&(Db(y),N("addLinkImg")),f.imgSrcBtns&&(Eb(y),N("addImgSearch")),2===f.linksNavig&&(xc(I),N("genRefMap")),f.linksNavig&&(gb(y),N("eventRefLink")),Zd(),f.markViewed&&ce(),Xe(),Ja(),Ka(),N("readPosts"),me(),N("scriptCSS"),rc=Date.now()-a)}}var Ia={version:"12.10.15.0",language:0,hideBySpell:1,menuHiddBtn:1,hideRefPsts:0,delHiddPost:0,updThread:1,updThrDelay:60,favIcoBlink:1,desktNotif:0,expandPosts:2,expandImgs:2,maskImgs:0,preLoadImgs:0,findRarJPEG:0,showGIFs:0,
noImgSpoil:0,postBtnsTxt:0,imgSrcBtns:1,noSpoilers:1,noPostNames:0,noPostScrl:1,keybNavig:0,correctTime:0,timeOffset:"",timePattern:"",linksNavig:2,linksOver:100,linksOut:1500,markViewed:0,strikeHidd:0,noNavigHidd:0,crossLinks:0,insertNum:1,addMP3:1,addImgs:1,addYouTube:3,YTubeType:0,YTubeWidth:360,YTubeHeigh:270,YTubeHD:0,YTubeTitles:0,ajaxReply:2,postSameImg:1,removeEXIF:1,removeFName:0,addPostForm:2,noThrdForm:1,favOnReply:1,addSageBtn:1,saveSage:1,sageReply:0,captchaLang:1,addTextBtns:1,txtBtnsLoc:0,
passwValue:"",userName:0,nameValue:"",userSignat:0,signatValue:"",noBoardRule:1,noGoto:1,noPassword:1,scriptStyle:0,expandPanel:0,attachPanel:1,panelCounter:1,rePageTitle:1,animation:1,closePopups:0,updScript:1,scrUpdIntrv:1,lastScrUpd:0,textaWidth:500,textaHeight:160};fa={hideBySpell:["Заклинания: ","Magic spells: "],menuHiddBtn:["Дополнительное меню кнопок скрытия ",
"Additional menu of hide buttons"],hideRefPsts:["Скрывать ответы на скрытые посты*","Hide replies to hidden posts*"],delHiddPost:["Удалять скрытые посты","Delete hidden posts"],updThread:{q:[["Откл.","Авто","По клику"],
["Disable","Auto","On click"]],t:["AJAX обновление треда* ","AJAX thread update* "]},updThrDelay:[" (сек)"," (sec)"],favIcoBlink:["мигать фавиконом при новых постах*","Favicon blinking on new posts*"],desktNotif:["Уведомления на рабочем столе",
"Desktop notifications"],expandPosts:{q:[["Откл.","Авто","По клику"],["Disable","Auto","On click"]],t:["AJAX загрузка сокращенных постов*","AJAX upload of shorted posts*"]},expandImgs:{q:[["Откл.","В посте","По центру"],
["Disable","In post","By center"]],t:["раскрывать изображения ","expand images "]},preLoadImgs:["Предварительно загружать изображения*","Pre-load images*"],findRarJPEG:["Распознавать rarJPEG'и в изображениях*",
"Detect rarJPEGs in images*"],showGIFs:["Анимировать GIFы в постах*","Animate GIFs in posts*"],noImgSpoil:["Раскрывать изображения-спойлеры*","Open spoiler-images*"],postBtnsTxt:["Кнопки постов в виде текста*",
"Show post buttons as text*"],imgSrcBtns:["Добавлять кнопки для поиска изображений*","Add image search buttons*"],noSpoilers:["Открывать текстовые спойлеры","Open text spoilers"],noPostNames:["Скрывать имена в постах",
"Hide names in posts"],noPostScrl:["Без скролла в постах","No scroll in posts"],keybNavig:["Навигация с помощью клавиатуры* ","Navigation with keyboard* "],correctTime:["Корректировать время в постах* ",
"Correct time in posts* "],timeOffset:[" Разница во времени"," Time difference"],timePattern:["Шаблон замены","Replace pattern"],linksNavig:{q:[["Откл.","Без карты","С картой"],["Disable","No map","With map"]],t:["навигация по >>ссылкам* ",
"navigation by >>links* "]},linksOver:[" задержка появления (мс)"," delay appearance (ms)"],linksOut:[" задержка пропадания (мс)"," delay disappearance (ms)"],markViewed:["Отмечать просмотренные посты*",
"Mark viewed posts*"],strikeHidd:["Зачеркивать >>ссылки на скрытые посты","Strike >>links to hidden posts"],noNavigHidd:["Не отображать превью для скрытых постов","Don't show previews for hidden posts"],
crossLinks:["Преобразовывать http:// в >>/b/ссылки*","Replace http:// with >>/b/links*"],insertNum:["Вставлять >>ссылку по клику на №поста*","Insert >>link on №postnumber click*"],addMP3:["Добавлять плейер к mp3-ссылкам* ",
"Add player to mp3-links* "],addImgs:["Загружать изображения к .jpg-, .png-, .gif-ссылкам*","Load images to .jpg-, .png-, .gif-links*"],addYouTube:{q:[["Ничего","Плейер по клику","Авто плейер","Превью+плейер",
"Только превью"],["Nothing","On click player","Auto player","Preview+player","Only preview"]],t:["к YouTube-ссылкам* ","to YouTube-links* "]},YTubeType:{q:[["Flash","HTML5 iframe","HTML5 video"],["Flash","HTML5 iframe","HTML5 video"]],t:["",""]},YTubeHD:["HD ","HD "],YTubeTitles:["Загружать названия к YouTube-ссылкам*",
"Load titles into YouTube-links*"],ajaxReply:{q:[["Откл.","Iframe","HTML5"],["Disable","Iframe","HTML5"]],t:["AJAX отправка постов*","posting with AJAX*"]},postSameImg:["Возможность отправки одинаковых изображений",
"Ability to post same images"],removeEXIF:["Удалять EXIF из отправляемых JPEG-изображений","Remove EXIF from uploaded JPEG-images"],removeFName:["Удалять имя из отправляемых файлов","Remove names from uploaded files"],
addPostForm:{q:[["Сверху","Внизу","В постах","Отдельная"],["At top","At bottom","Inline","Hanging"]],t:["форма ответа в треде* ","reply form in thread* "]},noThrdForm:["Прятать форму создания треда",
"Hide thread creating form"],favOnReply:["Добавлять тред в избранное при ответе","Add thread to favorites on reply"],addSageBtn:["Sage вместо поля E-mail* ","Sage button instead of E-mail field* "],saveSage:["запоминать сажу",
"remember sage"],captchaLang:{q:[["Откл.","Eng","Rus"],["Disable","Eng","Rus"]],t:["язык ввода капчи","language input in captcha"]},addTextBtns:{q:[["Откл.","Графич.","Упрощ.","Стандарт."],["Disable","As images","As text","Standard"]],t:["кнопки форматирования текста ",
"text format buttons "]},txtBtnsLoc:["внизу","at bottom"],userPassw:[" Постоянный пароль"," Fixed password"],userName:["Постоянное имя","Fixed name"],userSignat:["Постоянная подпись","Fixed signature"],noBoardRule:["правила ",
"rules "],noGoto:["поле goto ","goto field "],noPassword:["пароль","password"],excludeList:["Список адресов, запрещающих запуск скрипта:","Address list, that excludes script launch:"],scriptStyle:{q:[["Glass black","Glass blue","Solid grey"],["Glass black","Glass blue",
"Solid grey"]],t:["стиль скрипта","script style"]},attachPanel:["Прикрепить главную панель","Attach main panel"],panelCounter:["Счетчик постов/изображений на главной панели",
"Counter of posts/images on main panel"],rePageTitle:["Название треда в заголовке вкладки*","Thread title in page tab*"],animation:["CSS3 анимация в скрипте","CSS3 animation in script"],closePopups:["Автоматически закрывать уведомления",
"Close popups automatically"],updScript:["Автоматически проверять обновления скрипта","Check for script update automatically"],scrUpdIntrv:{q:[["Каждый день","Каждые 2 дня","Каждую неделю",
"Каждые 2 недели","Каждый месяц"],["Every day","Every 2 days","Every week","Every 2 week","Every month"]],t:["интервал проверки","check interval"]},language:{q:[["Ru","En"],["Ru","En"]],t:["",""]}};wd={bold:["Жирный","Bold"],italic:["Наклонный",
"Italic"],under:["Подчеркнутый","Underlined"],strike:["Зачеркнутый","Strike"],spoil:["Спойлер","Spoiler"],code:["Код","Code"],quote:["Цитировать выделенное","Quote selected"]};Jc={filters:["Фильтры","Filters"],
posts:["Посты","Posts"],links:["Ссылки","Links"],form:["Форма","Form"],common:["Общее","Common"],info:["Инфо","Info"]};Qb={settings:["Настройки","Settings"],hidden:["Скрытое","Hidden"],favor:["Избранное","Favorites"],refresh:["Обновить",
"Refresh"],goback:["Назад","Go back"],gonext:["Следующая","Next"],goup:["Наверх","To the top"],godown:["В конец","To the bottom"],newthr:["Создать тред","New thread"],expimg:["Раскрыть картинки","Expand images"],maskimg:["Маскировать картинки",
"Mask images"],"upd-on":["Автообновление треда","Thread autoupdate"],"audio-off":["Звуковое оповещение о новых постах","Sound notification about new posts"],catalog:["Каталог","Catalog"],counter:["Постов/Изображений в треде",
"Posts/Images in thread"]};Ld={sel:["Скрывать выделенное","Hide selected text"],img:["Скрывать изображение","Hide same images"],ihash:["Скрыв. схожие изобр.","Hide similar images"],text:["Скрыть схожий текст",
"Hide similar text"],noimg:["Скрыть без изображений","Hide without images"],notext:["Скрыть без текста","Hide without text"]};ld=[["5 постов","15 постов","30 постов","50 постов","100 постов"],
["5 posts","15 posts","30 posts","50 posts","100 posts"]];md=[["1 страница","2 страницы","3 страницы","4 страницы","5 страниц"],["1 page","2 pages","3 pages","4 pages","5 pages"]];nd=[["Каждые 30 сек.","Каждую минуту",
"Каждые 2 мин.","Каждые 5 мин."],["Every 30 sec.","Every minute","Every 2 min.","Every 5 min."]];Kc=["Добавить","Add"];Lc=["Применить","Apply"];mb=["Очистить","Clear"];Mc=["Помощь","Help"];td=["Обновить","Refresh"];Wc=
["Загрузить","Load"];Ga=["Сохранить","Save"];nb=["Правка","Edit"];$c=["Сброс","Reset"];Wb=["Удалить","Remove"];hd=["Инфо","Info"];Vb=["Отмена","Undo"];ra=["Загрузка...","Loading..."];Rb=["Проверка...",
"Checking..."];Zb=["Удаление...","Deleting..."];qb=["Ошибка:","Error:"];sa=["Ошибка подключения","Connection failed"];Dd=["Тред недоступен (№","Thread is unavailable (№"];ud=["Пост(ы) удален(ы)!","Post(s) deleted!"];
vd=["Не могу удалить пост(ы):\n","Can't delete post(s):\n"];Md=["Неправильные настройки времени","Invalid time settings"];Yc=["Глобальные настройки не найдены",
"Global config not found"];$b=["Пост не найден","Post not found"];Pc=["Проверить сейчас","Check now"];Id=["Доступно обновление!","Update available!"];Jd=["У вас стоит самая последняя версия!",
"You have latest version!"];Ed=["В треде %m непрочитанных сообщений.","There are %m unreaded messages in thread."];Qc=["Версия: ","Version: "];Rc=["Хранение: ","Storage: "];Sc=["Тредов просмотрено: ","Threads viewed: "];
Tc=["Тредов создано: ","Threads created: "];Uc=["Постов: ","Posts: "];Sb=["Всего: ","Total: "];Oc=["Не отображать: ","Do not show: "];Xc=["Загрузить глобальные настройки","Load global settings"];
Zc=["Сохранить настройки как глобальные","Save settings as global"];ad=["Сбросить в настройки по умолчанию","Reset settings to defaults"];pb=["Сохранить внесенные изменения",
"Save your changes"];ob=["Правка в текстовом формате","Edit in text format"];id=["Обновить счетчики постов","Refresh posts counters"];jd=["Проверить актуальность тредов (до 5 страницы)",
"Check for threads actuality (up to 5 page)"];kd=["Очистить записи недоступных тредов","Clear notes of inaccessible threads"];Xb=["Удалить выделенные записи","Remove selected notes"];cd=["Скрытые посты на странице",
"Hidden posts on page"];fd=["Скрытые треды","Hidden threads"];dd=["На этой странице нет скрытых постов...","No hidden posts on this page..."];ed=["Нет скрытых тредов...","No hidden threads..."];Ub=["Раскрыть все",
"Expand all"];gd=["Нет избранных тредов...","Favorites is empty..."];Hd=["Ответы:","Replies:"];Bd=["Пропущено ответов: ","Posts omitted: "];Cd=["Свернуть тред","Collapse thread"];Gd=["удалён","deleted"];Kd=["Получить новые посты",
"Get new posts"];Yb=["Страница","Page"];Fd=["Скрытый тред:","Hidden thread:"];pd=["Раскрыть форму","Expand form"];od=["Искать в ","Search in "];Ad=["Ответ","Reply"];qd=["Ответ в","Reply to"];sd=["Ждите","Wait"];rd=["+ .rar","+ .rar"];
Nc=['"Ctrl+Влево" - предыдущая страница,\n"Ctrl+Вправо" - следующая страница.\n\nНа доске:\n"J" - тред ниже,\n"K" - тред выше,\n"N" - пост ниже,\n"M" - пост выше,\n"V" - вход в тред.\n\nВ треде:\n"J" - пост ниже,\n"K" - пост выше,\n"V" - быстрый ответ',
'"Ctrl+Left" - previous page\n"Ctrl+Right" - next page.\n\nOn board:\n"J" - thread below,\n"K" - thread above,\n"N" - post below,\n"M" - post above,\n"V" - enter a thread.\n\nIn thread:\n"J" - post below,\n"K" - post above,\n"V" - quick reply.'];yd=["янв,фев,мар,апр,мая,июн,июл,авг,сен,окт,ноя,дек".split(","),"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(",")];
zd=["января,февраля,марта,апреля,мая,июня,июля,августа,сентября,октября,ноября,декабря".split(","),"January,February,March,April,May,June,July,August,September,October,November,December".split(",")];
xd=["Вск,Пнд,Втр,Срд,Чтв,Птн,Сбт".split(","),"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")];bd=["Данное действие удалит все ваши настройки и закладки. Продолжить?",
"This will delete all your preferences and favourites. Continue?"];Nd=["Файл повреждён: ","File is corrupted: "];Vc=["Отладка","Debug"];Tb=["Информация для отладки","Information for debugging"];la=["синтаксическая ошибка",
"syntax error"];Od=["неизвестный спелл: ","unknown spell: "];ac=["пропущен оператор","missing operator"];Pd=["ошибка преобразования %1 в число","can't convert %1 to number"];Qd=["синтаксическая ошибка в регулярном выражении: ",
"syntax error in regular expression: "];Rd=["неожиданный символ ","unexpected character "];Sd=["пропущена открывающаяся скобка","missing ( in parenthetical"];Td=["пропущена закрывающаяся скобка",
"missing ) in parenthetical"];Aa=[" (строка "," (row "];Ua=[", столбец ",", column "];var l=window.document,ta=Array.prototype,f,F,V,Da,da,I={},B=[],ea=[],X,P,d={},g,u,q,$a,Jb,Qa,j,y,$,cc,hb,E,Ob;Pb=[];qa={};lb=pa=m;za="";kb=m;Sa=ka=n;Ta=m;jb=Ra=n;var gc,rc,sb="",Nb,xb,h,Oa="",bb,ab;vb.prototype=Ia;pe.prototype={hc:{sel:function(a){a.onclick=function(a){x(a);Pa("#words","("+Oa+")")}},img:function(a){a.onclick=function(a){x(a);a=this.parentNode.Za;
Pa("#img","(="+Xd(a)+"@"+hc(a).join("x")+")")}},ihash:function(a){a.onclick=function(a){x(a);Pa("#ihash","("+df(this.parentNode.Za)+")")}},text:function(a){a.onclick=function(a){x(a);Nf(this.parentNode.Za)}},noimg:function(a){a.onclick=function(a){x(a);Pa("(#all"," & !#img)")}},notext:function(a){a.onclick=function(a){x(a);Pa("(#all"," & !#tlen)")}}},add:function(a){this.Cb.push(Ld[a][h]);this.Db.push(a)}};zb.prototype.append=function(a){if("file"===a.type){if(0<a.files.length){var b=a.files[0].name;
this.data.push("--"+this.va+'\r\nContent-Disposition: form-data; name="'+a.name+'"; filename="'+(!f.removeFName?b:" "+b.substring(b.lastIndexOf(".")))+'"\r\nContent-type: '+a.files[0].type+"\r\n\r\n",m,"\r\n");this.Cc(a,this.data.length-2)}}else("checkbox"!==a.type||a.checked)&&this.data.push("--"+this.va+'\r\nContent-Disposition: form-data; name="'+a.name+'"\r\n\r\n'+a.value+"\r\n")};zb.prototype.Cc=function(a,b){var c=new FileReader,e=a.files[0],k=this;/^image\/(?:png|jpeg)$/.test(e.type)?(c.onload=
function(){var g=Bf(new Uint8Array(this.result),d.D||d.b||!!a.ca);g?(a.ca&&g.push(a.ca),f.postSameImg&&g.push(""+Math.round(1E6*Math.random())),k.data[b]=new Blob(g),k.Ta--):(k.error=i,K(Nd[h]+e.name,"upload",n));c=k=a=b=e=m},c.readAsArrayBuffer(e),this.Ta++):this.data[b]=e};va.Gc=function(a){if(a.checked&&(!/^[+-]\d{1,2}$/.test(f.timeOffset)||va.qb(f.timePattern)))K(Md[h],"err-correcttime",n),O("correctTime",0),a.checked=n};va.qb=function(a){return!a.contains("i")||!a.contains("h")||!a.contains("d")||
!a.contains("y")||!(a.contains("n")||a.contains("m"))||/[^\?\-\+sihdmwny]|mm|ww|\?\?|([ihdny]\?)\1+/.test(a)};va.prototype={mc:function(a){if(this.Bb||this.disabled)return this;var b,c,e,d=1,f=0,o=a.match(RegExp(this.Mb));if(!o)return this.disabled=i,this;this.oa="";for(e=o[0];c=o[d++];){if("m"===(b=this.pattern[d-2]))this.Va=3<c.length;a=e.indexOf(c,f);this.oa+=e.substring(f,a)+"_"+b;f=a+c.length}sessionStorage.timeRPHash=Ya(sessionStorage.timeRPattern=(this.Va?"1":"0")+this.oa);this.Bb=i;return this},
vb:function(a){function b(a){return 10>a?"0"+a:a}if(this.disabled)return a;var c=this.ac,e=this.Va?this.Zb:this.$b,d=this.pattern,f=this.oa,o=this.fc,a=a.replace(RegExp(this.Mb,"g"),function(){var a,g,h,j,l,p,q,r,s;for(a=1;8>a;a++)g=arguments[a],h=d[a-1],"s"===h?j=g:"i"===h?l=g:"h"===h?p=g:"d"===h?q=g:"n"===h?r=g-1:"y"===h?s=g:"m"===h&&(r=/^янв|^jan/i.test(g)?0:/^фев|^feb/i.test(g)?1:/^мар|^mar/i.test(g)?2:/^апр|^apr/i.test(g)?3:/^май|^may/i.test(g)?
4:/^июн|^jun/i.test(g)?5:/^июл|^jul/i.test(g)?6:/^авг|^aug/i.test(g)?7:/^сен|^sep/i.test(g)?8:/^окт|^oct/i.test(g)?9:/^ноя|^nov/i.test(g)?10:/^дек|^dec/i.test(g)&&11);a=new Date(2===s.length?"20"+s:s,r,q,p,l,j||0);a.setHours(a.getHours()+o);return f.replace("_s",b(a.getSeconds())).replace("_i",b(a.getMinutes())).replace("_h",b(a.getHours())).replace("_d",b(a.getDate())).replace("_w",c[a.getDay()]).replace("_n",
b(a.getMonth()+1)).replace("_m",e[a.getMonth()]).replace("_y",2===s.length?(""+a.getFullYear()).substring(2):a.getFullYear())}),c=e=d=f=o=b=m;return a}};L.pb=function(a,b){var c,e;e=a[0];for(c=e.length-1;0<=c;c--)if(e[c]===b)return i;e=a[1];for(c=e.length-1;0<=c;c--)if(b>=e[c][0]&&b<=e[c][1])return i;return n};L.Ea=function(a,b,c,e,d,f,g){b=E.Ha(c,b);b===m?E.hb(a,e,d,f,g):b?(e=e.pop(),d(a,E.La(e[2][e[0]-1]),g)):f&&f(a,g)};L.prototype={Na:"words,exp,exph,imgn,ihash,subj,name,trip,img,sage,op,tlen,all,video,wipe,num".split(","),
jb:[function(a,b){var c;return na(a).toLowerCase().contains(b)||(c=a.querySelector(".replytitle, .filetitle"))&&c.textContent.toLowerCase().contains(b)},function(a,b){return b.test(na(a))},function(a,b){return b.test(a.innerHTML)},function(a,b){var c=z(d.Z,a);return c&&b.test(c.textContent)},function(a,b){return a.P[0]&&df(a)===b},function(a,b){var c=a.querySelector(".replytitle, .filetitle");return!c||!(c=c.textContent)?n:!b||b.test(c)},function(a,b){var c=a.querySelector(".commentpostername, .postername");
return!c||!(c=c.textContent)?n:!b||c.contains(b)},function(a,b){var c=z("postertrip",a);return!c?n:!b||c.textContent.contains(b)},function(a,b){if(!a.P[0])return n;if(b){var c,e,d;if(c=b[1]){d=Xd(a);switch(b[0]){case 0:e=d>=c[0]&&d<=c[1];break;case 1:e=d<c[0];break;case 2:e=d>c[0]}if(e){if(!b[2])return i}else return n}if(c=b[2])switch(e=hc(a),d=+e[0],e=+e[1],b[0]){case 0:return d>=c[0]&&d<=c[1]&&e>=c[2]&&e<=c[3];case 1:return d<c[0]&&e<c[3];case 2:return d>c[0]&&e>c[3]}}return i},function(a){return a.Nb},
function(a){return a.p},function(a,b){var c=na(a);return!b?!!c:L.pb(b,c.replace(/\n/g,"").length)},function(){return i},function(a,b,c,e,d,g){if(b)if(!a.gb||!f.YTubeTitles)L.Ea(a,n,c,e,d,g,n);else{var h=U("de-ytube-link",a),j=21,l=0,p=h.length;(function wf(){var f;0===--j&&(j=21,l++);for(;l<p;)switch(f=h[l],f.eb){case 1:setTimeout(wf,500);return;case 2:if(b.test(f.textContent)){L.Ea(a,i,c,e,d,g,20!==j);h=j=l=p=a=b=e=d=g=m;return}default:l++}L.Ea(a,n,c,e,d,g,20!==j);h=j=l=p=a=b=e=d=g=m})()}else L.Ea(a,
!!a.gb,c,e,d,g,n)},function(a,b){var c,e,d,f,g,h,j,l,p=na(a);if(b&1&&(c=p.replace(/>/g,"").split(/\s*\n\s*/),5<(e=c.length))){c.sort();d=0;for(g=e/4;d<e;){h=c[d];for(f=0;c[d++]===h;)f++;if(4<f&&f>g&&h)return L.C='same lines: "'+h.substr(0,20)+'" x'+f,i}}if(b&2&&(c=p.replace(/[\s\.\?\!,>]+/g," ").toUpperCase().split(" "),3<(e=c.length))){c.sort();d=0;g=e/4;for(l=j=0;d<e;j++){h=c[d];for(f=0;c[d++]===h;)f++;if(25<e&&(f>l&&2<h.length&&(l=f),l>=g))return L.C='same words: "'+h.substr(0,20)+'" x'+l,i}h=
j/e;if(0.25>h)return L.C="uniq words: "+(100*h).toFixed(0)+"%",i}if(b&4&&(c=p.replace(/https*:\/\/.*?(\s|$)/g,"").replace(/[\s\.\?!,>:;-]+/g," ").split(" "),50<c[0].length||1<(e=c.length)&&10<c.join("").length/e))return L.C="long words",i;if(b&8&&(c=p.replace(/\s+/g,""),30<(e=c.length)&&0.4<(h=c.replace(/[0-9a-zа-я\.\?!,]/ig,"").length/e)))return L.C="specsymbols: "+(100*h).toFixed(0)+"%",i;if(b&16&&(c=p.replace(/[\s\.\?!;,-]+/g," ").trim().split(" "),4<(e=c.length))){for(j=f=g=d=0;d<e;d++)h=
c[d],5>(h.match(/[a-zа-я]/ig)||[]).length||(2<(h.match(/[A-ZА-Я]/g)||[]).length&&j++,h===h.toUpperCase()&&f++,g++);if(0.3<=f/g&&4<g)return L.C="CAPSLOCK: "+100*(f/c.length)+"%",i;if(0.3<=j/g&&8<g)return L.C="cAsE words: "+100*(j/c.length)+"%",i}return b&32&&(c=p.replace(/\s+/g," ").replace(/>>\d+|https*:\/\/.*?(?: |$)/g,""),30<(e=c.length)&&0.4<(h=(e-c.replace(/\d/g,"").length)/e))?(L.C="numbers: "+Math.round(100*h)+"%",i):L.C=n},function(a,b){return L.pb(b,a.count+1)}],Sa:function(a,
b){var c=a.lastIndexOf("/"),e=a.substr(c+1);return RegExp(a.substr(1,c-1),b?e.replace("g",""):e)},Ub:function(a,b,c){if(2===this.o||4===this.o)return this.z=ac[h],this.B=0;var e,d,f,g,j=b.substr(c+1).match(/^([a-z]+)(?:\[([a-z0-9]+)(?:(,)|,(\s*[0-9]+))?\])?/);if(!j)return this.z=la[h],this.B=0;d=this.Na.indexOf(j[1]);this.o=2;if(-1===d)return this.z=Od[h]+j[1],this.B=1,0;this.ga?(f=d|256,this.ga=n):f=d;e=j[2]&&[j[2],j[4]?j[4]:j[3]?-1:n];b=b.substr(c+1+j[0].length);g="("!==b[0]?0:")"===b[1]?2:n;c=
g!==n;switch(d){case 4:if(b=!c&&b.match(/^\((?:(\d+)|(.*?))\)/)){if(b[1])return a.push([f,+b[1],e]),j[0].length+b[0].length;this.z=Pd[h].replace("%1",b[2])}else this.z=la[h];this.B=j[0].length;return 0;case 8:if(c)return a.push([f,"",e]),j[0].length+g;b=b.match(/^\(([><=])(?:(\d+(?:\.\d+)?)(?:-(\d+(?:\.\d+)?))?)?(?:@(\d+)(?:-(\d+))?x(\d+)(?:-(\d+))?)?\)/);if(!b||!b[2]&&!b[4])return this.z=la[h],this.B=j[0].length,0;a.push([f,["="===b[1]?0:"<"===b[1]?1:2,b[2]&&[+b[2],b[3]?+b[3]:+b[2]],b[4]&&[+b[4],
b[5]?+b[5]:+b[4],+b[6],b[7]?+b[7]:+b[6]]],e]);return j[0].length+b[0].length;case 14:if(c)return a.push([f,63,e]),j[0].length+g;if(b=b.match(/^\(([a-z, ]+)\)/))if(g=0,!b[1].split(/, */).some(function(a){switch(a){case "samelines":g=g|1;return n;case "samewords":g=g|2;return n;case "longwords":g=g|4;return n;case "symbols":g=g|8;return n;case "capslock":g=g|16;return n;case "numbers":g=g|32;return n;default:return i}}))return a.push([f,g,e]),j[0].length+b[0].length;this.z=la[h];this.B=j[0].length;
return 0;case 11:if(c)return a.push([f,"",e]),j[0].length+g;case 15:if(b=!c&&b.match(/^\(([\d-, ]+)\)/))return b[1].split(/, */).forEach(function(a){if(a.contains("-")){a=a.split("-");a[0]=+a[0];a[1]=+a[1];this[1].push(a)}else this[0].push(+a)},g=[[],[]]),a.push([f,g,e]),j[0].length+b[0].length;this.z=la[h];this.B=j[0].length;return 0;case 13:case 5:if(c)return a.push([f,"",e]),j[0].length+g;case 1:case 2:case 3:b=!c&&b.match(/^\((\/.*?[^\\]\/[ig]*)\)/);if(!b)return this.z=la[h],this.B=j[0].length,
0;g=b[1];try{this.Sa(g,i)}catch(l){return this.z=Qd[h]+g,this.B=j[0].length,0}a.push([f,g,e]);return j[0].length+b[0].length;case 7:case 9:case 10:case 12:if(c)return a.push([f,"",e]),j[0].length+g;default:b=b.match(/^\((.*?[^\\])\)/);if(!b)return this.z=la[h],this.B=0,n;g=b[1].replace(/\\\)/g,")");a.push([f,0===d?g.toLowerCase():g,e]);return j[0].length+b[0].length}},Xb:function(a,b){if(2===b){if(!this.o||3===this.o)return this.o=1,this.ga=i}else if(2===this.o||4===this.o)return this.o=0,1===b&&
(a[a.length-1][0]|=512),i;return n},Rb:function(a){if(!a)return m;this.o=this.ga=m;for(var b,c=[],e=[],d=c,f=0,g=1,j=1,l=0,p=a.length;l<p;l++,g++)switch(a[l]){case "\n":j++,g=0;case "\r":case " ":continue;case "#":b=this.Ub(d,a,l);if(0===b)return this.O=this.z+Aa[h]+j+Ua[h]+(g+this.B)+")",n;l+=b;g+=b;break;case "(":if(2===this.o||4===this.o)return this.O=ac[h]+Aa[h]+j+Ua[h]+g+")",n;e.push(d);d.push([this.ga?511:255,[]]);d=d[d.length-1][1];f++;this.o=3;this.ga=n;break;case ")":if(0<f)d=e.pop(),f--;
else return this.O=Sd[h]+Aa[h]+j+Ua[h]+g+")",n;this.o=4;break;case "|":case "&":case "!":if(this.Xb(d,"|"===a[l]?0:"&"===a[l]?1:2))break;default:return this.O=Rd[h]+a[l]+Aa[h]+j+Ua[h]+g+")",n}return 2!==this.o&&4!==this.o?(this.O=la[h]+Aa[h]+j+")",n):0<f?(this.O=Td[h]+Aa[h]+j+")",n):0===c.length?m:c},Ia:function(a,b,c,e){var d=0!==(b&256);if(c===e-1){if(0===c)return d?[[12,"",m]]:m;b=a.length-1;if(d){for(;a[b]&&0===(a[b][0]&512);)delete a[b],b-=2;a[b]&&(a[b][0]&=511);if(0>b)return[[12,"",m]]}else{for(;a[b]&&
0!==(a[b][0]&512);)delete a[b],b-=2;if(0>b)return m}return 1===a.length&&255===a[0][0]?a[0][1]:a}if(0!==(b&512)){if(!d)return m}else if(d)return[[12,"",m]];return n},Pa:function(a){for(var b=0,c=a.length,e=[],d,f,g;b<c;b++){f=a[b];d=f[0]&255;if(255===d)if(g=this.Pa(f[1])){1===g.length?(g=g[0],g[0]|=f[0]&512,g[0]^=f[0]&256,e.push(g)):e.push([f[0],g]);continue}else g=this.Ia(e,f[0],b,c);else if((g=f[2])&&(g[0]!==u||(-1===g[1]?q:g[1]&&g[1]!==q)))g=this.Ia(e,f[0],b,c);else if(12===d)g=this.Ia(e,f[0]^
256,b,c);else{e.push(f);continue}if(g!==n)return g}return 0===e.length?m:1===e.length&&255===e[0][0]?e[0][1]:e},Tb:function(a){a&&a.forEach(function c(a){var d=a[1];if(d)switch(a[0]&255){case 1:case 2:case 3:case 5:case 13:a[1]=this(d,i);break;case 255:d.forEach(c,this)}},this.Sa);return a},Ha:function(a,b){0!==(a&256)&&(b=!b);if(0!==(a&512)){if(!b)return n}else if(b)return i;return m},La:function(a){var b=a[0]&255,c=a[1];if(255===b)return this.La(c[this.lb]);a=0!==(a[0]&256)?"!":"";return 14===b?
a+("#wipe"+(L.C?": "+L.C:"")):a+("#"+this.Na[b]+(c?": "+c:""))},hb:function(a,b,c,e,d){var f,g;g=n;f=b.pop();for(var h=f[0],j=f[1],l=f[2];;){if(h<j){g=l[h][0];f=g&255;if(255===f){b.push([h,j,l]);l=l[h][1];j=l.length;h=0;continue}else if(13===f){b.push([h+1,j,l]);this.jb[f](a,l[h][1],g,b,c,e);break}else f=this.jb[f](a,l[h][1]);g=this.Ha(g,f);if(g===m){h++;continue}this.lb=h}else this.lb=h-=1,g=n;if(f=b.pop())if(h=f[0],j=f[1],l=f[2],g=this.Ha(l[h][0],g),g===m){h++;continue}g?c(a,this.La(l[h]),d):e&&
e(a,d);break}},Wb:function(a,b,c){this.hb(a,[[0,this.Ra.length,this.Ra]],function(a,c,d){b(a,c);d&&(clearTimeout(Ob),Ob=setTimeout(Ja,500))},c&&function(a,b){c(a);b&&(clearTimeout(Ob),Ob=setTimeout(Ja,500))},n)},Ka:function(a,b,c){c&&c(a)},Sb:function(a){var b=[],c=[],e="",a=a.replace(/([^\\]\)|^)?[\n\s]*(#rep(?:\[([a-z0-9]+)(?:(,)|,(\s*[0-9]+))?\])?\((\/.*?[^\\]\/[ig]*)(?:,\)|,(.*?[^\\])?\)))[\n\s]*/g,function(a,c,d,f,g,h,j,l){b.push([f,g?-1:h,j,(l||"").replace(/\\\)/g,")")]);e+=d+"\n";return c||
""}).replace(/([^\\]\)|^)?[\n\s]*(#outrep(?:\[([a-z0-9]+)(?:(,)|,(\s*[0-9]+))?\])?\((\/.*?[^\\]\/[ig]*)(?:,\)|,(.*?[^\\])?\)))[\n\s]*/g,function(a,b,d,f,g,h,j,l){c.push([f,g?-1:h,j,(l||"").replace(/\\\)/g,")")]);e+=d+"\n";return b||""});this.I.Dc=b;this.I.sc=c;return[a,e]},ua:function(a){if(a){var b=[];a.forEach(function(a){(!a[0]||a[0]===u&&(-1===a[1]?!q:!a[1]||a[1]===q))&&b.push([a[2],a[3]])});return 0===b.length?n:b}return n},kb:function(a){if(a)for(var b=a.length-1;0<=b;b--)a[b][0]=this.Sa(a[b][0],
n);return a},Ma:function(a,b,c){this.Ra=this.Tb(a);this.Qa=this.kb(b);this.Oa=this.kb(c);this.T=this.Ra?this.Wb:this.Ka;this.zb=!!a;this.Xa=!!b;this.yb=!!c},Ja:function(){this.hash=0;this.list="";this.T=this.Ka;this.zb=this.Xa=this.yb=n;O("hideBySpell",0)},Vb:function(a,b,c,e,d,f){e=(c?"!":"")+"#"+e;f.push(a?"(#op"+b+" & "+e+d+")":c&&b&&"!#num"!==e?"(#all"+b+" & "+e+d+")":e+b+d)},ib:function(a){var b=[],c=[],e=[],g="";a.forEach(function(a){if(a){var d,f="",g=n;if(d=a.match(/^#(?:([^\/]+)\/)?(\d+)? /))f=
d[1]?"["+d[1]+(d[2]?","+d[2]:"")+"]":"",a=a.substr(d[0].length);a.Fc()&&(a=a.substr(4),g=i);if("#"===a[0]){if(d=a.match(/^#([a-z]+)(?: (.*))?/))switch(d[1]){case "sage":this(g,f,n,"sage","",b);break;case "notxt":this(g,f,i,"tlen","",b);break;case "noimg":this(g,f,i,"img","",b);break;case "trip":this(g,f,n,"trip","",b);break;case "tmax":this(g,f,n,"tlen","("+d[2]+"-20000)",b);break;case "name":a=d[2].split("!!");a[1]&&this(g,f,n,"trip","(!!"+a[1]+")",b);a[0]&&(a=a[0].split("!"),a[1]&&this(g,f,n,"trip",
"(!"+a[1]+")",b),a[0]&&this(g,f,n,"name","("+a[0].replace(/\)/g,"\\)")+")",b));break;case "skip":this(g,f,i,"num","("+d[2]+")",e);break;case "rep":case "outrep":a=d[2].match(/(\/.*?[^\\]\/[ig]*)(?: (.*))?/);c.push("#"+d[1]+f+"("+a[1]+","+(a[2]||"").replace(/\)/g,"\\)")+")");break;case "theme":d[1]="subj";case "exp":case "exph":case "imgn":case "video":this(g,f,n,d[1],"("+d[2]+")",b);break;case "vtag":break;default:this(g,f,n,d[1],"("+d[2].replace(/\)/g,"\\)")+")",b)}}else this(g,f,n,"words","("+a.replace(/\)/g,
"\\)")+")",b)}},this.Vb);0!==f.hideByWipe&&(g=[],0!==f.wipeSameLin&&g.push("samelines"),0!==f.wipeSameWrd&&g.push("samewords"),0!==f.wipeLongWrd&&g.push("longwords"),1===f.wipeSpecial&&g.push("symbols"),1===f.wipeCAPS&&g.push("capslock"),0!==f.wipeNumbers&&g.push("numbers"),g=0===g.length?"":"#wipe("+g.join(",")+")"+(0!==b.length?" |\n":""));delete f.hideByWipe;delete f.wipeSameLin;delete f.wipeSameWrd;delete f.wipeLongWrd;delete f.wipeSpecial;delete f.wipeCAPS;delete f.wipeNumbers;J("DESU_Config_"+
d.c,JSON.stringify(f));return(0!==e.length?e.join(" &\n")+" &\n":"")+g+b.join(" |\n")+"\n\n"+c.join("\n")},Lb:n,pc:function(a){a=this.Na.indexOf(a);return 5>a||14<a},ma:function(a){a=(""+a).replace(/[\s\n]+$/,"");this.I={};var a=this.Sb(a),b=this.Rb(a[0]);if(b!==n)this.I.ic=b;else if(this.O){try{K(qb[h]+" "+this.O,"help-err-spell",n)}catch(c){GM_log(qb[h]+" "+this.O)}this.I.list="";return n}this.I.list=a.join("\n\n").replace(/[\s\n]+$/,"");return a},bb:function(a){this.hash=Ya(a);this.list=a;J("DESU_Spells_"+
d.c,JSON.stringify([1,this.hash,this.list]));a||this.Ja()},cb:function(){var a=this.I.ic,b=a?this.Pa(a):n,c=this.I.Dc,e=this.I.sc;0===c.length&&(c=n);0===e.length&&(e=n);J("DESU_CSpells_"+d.c,JSON.stringify([this.hash,a,c,e]));c=this.ua(c);e=this.ua(e);sessionStorage["de-spells-"+u+q]=JSON.stringify([this.hash,b,c,e]);this.Ma(b,c,e);this.bb(this.I.list)},Kb:function(){var a,b=Ca("DESU_Spells_"+d.c);this.Lb=i;if(b)try{return a=JSON.parse(b),3>a.length?(this.list=a[1]?this.ib(a[1]):"",this.hash=Ya(this.list)):
(this.hash=a[1],this.list=a[2]),this.hash}catch(c){}this.list="string"===typeof b?this.ib(b.split("\n")):"#wipe(samelines,samewords,longwords,numbers)";return this.hash=Ya(this.list)},update:function(){if(this.Kb()){var a,b,c,e;try{if((a=JSON.parse(sessionStorage["de-spells-"+u+q]))&&a[0]===this.hash){this.Ma(a[1],a[2],a[3]);return}}catch(f){}try{if((a=JSON.parse(Ca("DESU_CSpells_"+d.c)))&&a[0]===this.hash){b=a[1]?this.Pa(a[1]):n;c=this.ua(a[2]);e=this.ua(a[3]);this.Ma(b,c,e);sessionStorage["de-spells-"+
u+q]=JSON.stringify([this.hash,b,c,e]);return}}catch(g){}a=this.ma(this.list);this.bb(a?a.join("\n\n").replace(/\n+$/,""):"");this.cb()}else this.Ja()},disable:function(){this.T=this.Ka},replace:function(a){for(var b=0,c=this.Qa.length;b<c;b++)a=a.replace(this.Qa[b][0],this.Qa[b][1]);return a},rc:function(a){for(var b=0,c=this.Oa.length;b<c;b++)a=a.replace(this.Oa[b][0],this.Oa[b][1]);return a}};window.opera?S(l,{DOMContentLoaded:gf}):gf()})(window.opera&&window.opera.scriptStorage);
